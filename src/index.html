<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Granja Recanto Feliz - E-commerce</title>
    <!-- Preload recursos cr√≠ticos -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Montserrat:wght@400;600&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    
    <!-- Fallback para CSS -->
    <noscript>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Montserrat:wght@400;600&display=swap">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    </noscript>
    
    <!-- Tailwind carregado assincronamente -->
    <script>
        // Carregar Tailwind de forma n√£o bloqueante
        const tailwindScript = document.createElement('script');
        tailwindScript.src = 'https://cdn.tailwindcss.com';
        tailwindScript.async = true;
        document.head.appendChild(tailwindScript);
    </script>
    <!-- CSS Cr√≠tico Inline (Above-the-fold) -->
    <style>
        :root {
            --primary-color: #2D5016;
            --secondary-color: #8B4513;
            --accent-color: #228B22;
            --background-color: #F0F8E8;
            --vh: 1vh;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--background-color, #FDFBF5);
            margin: 0;
            padding: 0;
        }
        
        h1, h2, h3, .font-lora {
            font-family: 'Lora', serif;
        }
        
        /* CSS Cr√≠tico para carregamento r√°pido */
        .hero-bg {
            background-size: cover;
            background-position: center;
            min-height: 100vh;
            min-height: calc(var(--vh, 1vh) * 100);
        }
        
        .nav-button {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 600;
            transition: transform 0.2s ease;
            border: none;
            cursor: pointer;
            font-size: 16px;
            min-height: 44px;
            min-width: 44px;
        }
        
        .nav-button:hover {
            transform: translateY(-2px);
        }

        
        .nav-link.active {
            font-weight: 700;
            color: var(--secondary-color, #8B4513);
            border-bottom: 2px solid var(--secondary-color, #8B4513);
        }
        
        /* Classes tem√°ticas din√¢micas */
        .theme-diaDosPais {
            --primary-color: #1E3A8A;
            --secondary-color: #7C2D12;
            --accent-color: #0EA5E9;
            --background-color: #EFF6FF;
        }
        
        .theme-diadasMaes {
            --primary-color: #BE185D;
            --secondary-color: #A21CAF;
            --accent-color: #F472B6;
            --background-color: #FDF2F8;
        }
        
        .theme-natal {
            --primary-color: #DC2626;
            --secondary-color: #059669;
            --accent-color: #FBBF24;
            --background-color: #FEF3C7;
        }
        
        .theme-pascoa {
            --primary-color: #7C3AED;
            --secondary-color: #F59E0B;
            --accent-color: #10B981;
            --background-color: #F3E8FF;
        }
        
        .theme-modernoRustico {
            --primary-color: #5A7247;
            --secondary-color: #8B5A2B;
            --accent-color: #D4B896;
            --background-color: #F5E6D3;
            font-family: 'Open Sans', sans-serif;
        }
        
        .theme-modernoRustico h1,
        .theme-modernoRustico h2,
        .theme-modernoRustico h3,
        .theme-modernoRustico .font-lora {
            font-family: 'Playfair Display', serif;
        }
        
        .theme-modernoRustico .product-card {
            background: linear-gradient(145deg, #f5e6d3, #e8d4b8);
            border: 2px solid #8B5A2B;
            box-shadow: 
                inset 2px 2px 4px rgba(139, 90, 43, 0.1),
                2px 2px 8px rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            position: relative;
        }
        
        .theme-modernoRustico .product-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #8B5A2B, #5A7247);
            border-radius: 10px;
            z-index: -1;
        }
        
        .theme-modernoRustico .btn-primary {
            background: linear-gradient(145deg, #5A7247, #4a5f3a);
            border: 1px solid #8B5A2B;
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .theme-modernoRustico .btn-primary:hover {
            background: linear-gradient(145deg, #4a5f3a, #5A7247);
            transform: translateY(-1px);
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.25);
        }
        
        .theme-modernoRustico .banner-text {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            font-family: 'Playfair Display', serif;
        }
        
        /* Layouts de Bras√≠lia */
        .theme-aniversarioBrasilia {
            --primary-color: #1E40AF;
            --secondary-color: #F59E0B;
            --accent-color: #059669;
            --background-color: #DBEAFE;
        }
        
        .theme-diaDoCerrado {
            --primary-color: #92400E;
            --secondary-color: #059669;
            --accent-color: #FBBF24;
            --background-color: #FEF3C7;
        }
        
        .theme-festaJuninaPlanalto {
            --primary-color: #DC2626;
            --secondary-color: #F59E0B;
            --accent-color: #7C3AED;
            --background-color: #FDF2F8;
        }
        
        .theme-conscienciaNegraBsb {
            --primary-color: #1F2937;
            --secondary-color: #F59E0B;
            --accent-color: #059669;
            --background-color: #F9FAFB;
        }
        
        /* Efeitos especiais para layouts de Bras√≠lia */
        .theme-aniversarioBrasilia .hero-section {
            background: linear-gradient(135deg, #1E40AF, #3B82F6, #F59E0B);
        }
        
        .theme-diaDoCerrado .hero-section {
            background: linear-gradient(135deg, #92400E, #059669, #FBBF24);
        }
        
        .theme-festaJuninaPlanalto .hero-section {
            background: linear-gradient(135deg, #DC2626, #F59E0B, #7C3AED);
        }
        
        .theme-conscienciaNegraBsb .hero-section {
            background: linear-gradient(135deg, #1F2937, #F59E0B, #059669);
        }
        
        .theme-custom {
            /* Cores ser√£o aplicadas dinamicamente via JavaScript */
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        /* Estilos tem√°ticos */
        .theme-diadasMaes {
            background: linear-gradient(135deg, #FDF2F8, #FCE7F3) !important;
        }
        .theme-diadasMaes .bg-\[\#F5EFE6\] {
            background: linear-gradient(145deg, #FDF2F8, #FCE7F3) !important;
            border: 2px solid #F472B6 !important;
            box-shadow: 0 8px 25px rgba(244, 114, 182, 0.3) !important;
        }
        .theme-diadasMaes .bg-\[\#8B4513\] {
            background: linear-gradient(135deg, #BE185D, #F472B6) !important;
            border-radius: 25px !important;
        }
        
        .theme-natal {
            background: linear-gradient(135deg, #FEF3C7, #FEF9C3) !important;
        }
        .theme-natal .bg-\[\#F5EFE6\] {
            background: linear-gradient(145deg, #FEF3C7, #FEF9C3) !important;
            border: 3px solid #FBBF24 !important;
            box-shadow: 0 8px 25px rgba(251, 191, 36, 0.4) !important;
        }
        .theme-natal .bg-\[\#8B4513\] {
            background: linear-gradient(135deg, #DC2626, #059669) !important;
            border: 2px solid #FBBF24 !important;
            border-radius: 30px !important;
        }
        
        .theme-pascoa {
            background: linear-gradient(135deg, #F3E8FF, #EDE9FE) !important;
        }
        .theme-pascoa .bg-\[\#F5EFE6\] {
            background: linear-gradient(145deg, #F3E8FF, #EDE9FE) !important;
            border: 2px solid #10B981 !important;
            border-radius: 20px !important;
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3) !important;
        }
        .theme-pascoa .bg-\[\#8B4513\] {
            background: linear-gradient(135deg, #7C3AED, #10B981) !important;
            border-radius: 25px !important;
        }
        
        /* Anima√ß√µes decorativas */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .theme-decoration {
            animation: float 3s ease-in-out infinite;
        }
        
        /* Anima√ß√µes do Carrossel */
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slide-up {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes bounce-in {
            0% { opacity: 0; transform: scale(0.3); }
            50% { opacity: 1; transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        .animate-fade-in {
            animation: fade-in 1s ease-out 0.5s both;
        }
        .animate-slide-up {
            animation: slide-up 1s ease-out 1s both;
        }
        .animate-bounce-in {
            animation: bounce-in 1s ease-out 1.5s both;
        }
        
        .carousel-slide {
            transition: opacity 1s ease-in-out;
        }
        .carousel-slide.active {
            opacity: 1 !important;
        }
        
        .carousel-indicator.active {
            background-color: white !important;
            transform: scale(1.2);
        }
        
        /* Navega√ß√£o Fixa - Estrutura Principal */
        .fixed-nav {
            position: sticky;
            top: 80px;
            z-index: 40;
            background: rgba(253, 251, 245, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--secondary-color, #8B4513);
            padding: 16px 0;
        }
        
        .nav-main-buttons {
            display: flex;
            justify-content: center;
            gap: 24px;
            align-items: center;
        }
        
        /* Bot√µes principais da navega√ß√£o */
        .nav-button {
            background: linear-gradient(135deg, var(--primary-color, #2D5016), var(--secondary-color, #8B4513));
            color: white;
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 16px;
            position: relative;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }
        
        .nav-button.active {
            background: linear-gradient(135deg, var(--accent-color, #228B22), var(--primary-color, #2D5016));
        }
        
        /* Dropdown styles */
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 280px;
            box-shadow: 0 12px 32px rgba(0,0,0,0.15);
            z-index: 1000;
            border-radius: 16px;
            border: 1px solid rgba(0,0,0,0.1);
            top: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            scale: 0.95;
            padding: 12px 0;
        }
        
        /* √Årea invis√≠vel para manter hover */
        .dropdown-content::after {
            content: '';
            position: absolute;
            top: -12px;
            left: 0;
            right: 0;
            height: 12px;
            background: transparent;
        }
        
        .dropdown-content.show {
            display: block;
            opacity: 1;
            visibility: visible;
            scale: 1;
        }
        
        .dropdown-content a {
            color: #374151;
            padding: 16px 24px;
            text-decoration: none;
            display: flex;
            align-items: center;
            transition: all 0.2s ease;
            border-radius: 12px;
            margin: 4px 12px;
            cursor: pointer;
            font-weight: 500;
            font-size: 15px;
        }
        
        .dropdown-content a:hover {
            background: linear-gradient(135deg, #F3F4F6, #E5E7EB);
            color: var(--primary-color, #2D5016);
            transform: translateX(6px);
        }
        
        .dropdown-content a:active {
            background: linear-gradient(135deg, var(--accent-color, #228B22), #16A34A);
            color: white;
            transform: translateX(6px) scale(0.98);
        }
        
        .dropdown-content a i {
            width: 20px;
            font-size: 16px;
            margin-right: 12px;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }
        
        .dropdown-content a:hover i {
            opacity: 1;
        }
        
        /* Mostrar dropdown no hover */
        .dropdown:hover .dropdown-content,
        .dropdown-content:hover {
            display: block;
            opacity: 1;
            visibility: visible;
            scale: 1;
        }
        
        /* Manter dropdown vis√≠vel quando hover no conte√∫do */
        .dropdown:hover .dropdown-content {
            display: block;
            opacity: 1;
            visibility: visible;
            scale: 1;
        }
        
        /* Seta indicadora */
        .dropdown-content::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 10px solid white;
            filter: drop-shadow(0 -2px 4px rgba(0,0,0,0.1));
        }
        
        /* Indicador visual para bot√µes com dropdown */
        .dropdown-toggle::after {
            content: '‚ñº';
            margin-left: 8px;
            font-size: 12px;
            opacity: 0.7;
            transition: all 0.3s ease;
        }
        
        .dropdown:hover .dropdown-toggle::after {
            opacity: 1;
            transform: rotate(180deg);
        }
        
        /* Responsivo */
        @media (max-width: 768px) {
            .nav-main-buttons {
                flex-direction: column;
                gap: 12px;
            }
            
            .nav-button {
                width: 100%;
                text-align: center;
            }
            
            .dropdown-content {
                min-width: 250px;
                left: 0;
                right: 0;
                transform: none;
                margin: 0 auto;
            }
        }
    </style>
    
    <!-- Carregar CSS n√£o cr√≠tico assincronamente -->
    <script>
        // Fun√ß√£o para carregar CSS de forma ass√≠ncrona
        function loadCSS(href) {
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = href;
            link.media = 'print';
            link.onload = function() { this.media = 'all'; };
            document.head.appendChild(link);
        }
        
        // Carregar estilos n√£o cr√≠ticos ap√≥s carregamento inicial
        window.addEventListener('load', () => {
            // Carregar fontes adicionais se necess√°rio
            loadCSS('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Open+Sans:wght@400;600&display=swap');
        });
    </script>
</head>
<body class="text-gray-800">
    <!-- Header melhorado com mais destaque para o carrinho -->
    <header id="header" class="bg-[#FDFBF5]/80 backdrop-blur-sm sticky top-0 z-50 shadow-md transition-all duration-300">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#inicio" class="text-2xl font-bold font-lora text-[#5D4037] flex items-center">
                <img src="imagens/LOGO 2023.jpg" alt="Logo Granja Recanto Feliz" class="h-12 w-auto mr-3 rounded-lg shadow-sm">
                <span class="hidden sm:block">Granja Recanto Feliz</span>
            </a>
            <div class="hidden md:flex space-x-8">
                <a href="#inicio" class="nav-link text-gray-600 hover:text-[#5D4037] pb-1">In√≠cio</a>
                <a href="#produtos" class="nav-link text-gray-600 hover:text-[#5D4037] pb-1">Produtos</a>
                <a href="#sobre" class="nav-link text-gray-600 hover:text-[#5D4037] pb-1">Sobre N√≥s</a>
                <a href="#contato" class="nav-link text-gray-600 hover:text-[#5D4037] pb-1">Contato</a>
                <a href="admin.html" class="nav-link text-red-600 hover:text-red-800 pb-1 font-bold">Admin</a>
            </div>
            <div class="flex items-center space-x-4">
                <button id="cart-button" onclick="document.getElementById('cart-modal').classList.remove('hidden'); document.getElementById('cart-modal').style.display='flex'; updateCartModal();" class="relative flex items-center bg-[#8B4513] hover:bg-[#5D4037] text-white px-4 py-2 rounded-lg transition duration-300 cursor-pointer">
                    <i class="fas fa-shopping-cart mr-2"></i>
                    <span class="mr-2">Carrinho</span>
                    <span id="cart-count" class="cart-counter bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold">0</span>
                    <span id="cart-total-display" class="ml-2 text-sm font-bold">R$ 0,00</span>
                </button>
                <button id="mobile-menu-button" class="md:hidden text-2xl">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </nav>
        <!-- Menu mobile melhorado -->
        <div id="mobile-menu" class="hidden md:hidden bg-[#FDFBF5] py-4 shadow-lg">
            <a href="#inicio" class="block text-center py-3 text-gray-600 hover:text-[#5D4037] hover:bg-gray-100"><i class="fas fa-home mr-2"></i>In√≠cio</a>
            <a href="#produtos" class="block text-center py-3 text-gray-600 hover:text-[#5D4037] hover:bg-gray-100"><i class="fas fa-shopping-basket mr-2"></i>Produtos</a>
            <a href="#sobre" class="block text-center py-3 text-gray-600 hover:text-[#5D4037] hover:bg-gray-100"><i class="fas fa-info-circle mr-2"></i>Sobre N√≥s</a>
            <a href="#contato" class="block text-center py-3 text-gray-600 hover:text-[#5D4037] hover:bg-gray-100"><i class="fas fa-envelope mr-2"></i>Contato</a>
            <a href="admin.html" class="block text-center py-3 text-red-600 hover:text-red-800 hover:bg-red-50 font-bold"><i class="fas fa-cog mr-2"></i>Admin</a>
        </div>
    </header>

    <main>
        <!-- Carrossel Hero Moderno -->
        <section id="inicio" class="relative min-h-screen overflow-hidden">
            <div id="hero-carousel" class="relative w-full h-screen">
                <!-- Slide 1: Ovos Caipira -->
                <div class="carousel-slide active absolute inset-0 bg-cover bg-center transition-all duration-1000" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/ovos-caipira.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6 animate-fade-in">ü•ö Ovos Caipira Aut√™nticos</h1>
                            <p class="text-xl md:text-2xl mb-8 animate-slide-up">Galinhas criadas soltas, alimenta√ß√£o natural, sem horm√¥nios. O sabor puro da natureza em cada ovo.</p>
                            <a href="#produtos" class="bg-[#4CAF50] hover:bg-green-700 text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center animate-bounce-in">
                                <i class="fas fa-shopping-basket mr-2"></i> Ver Ovos Caipira
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 2: Galinhas Caipira -->
                <div class="carousel-slide absolute inset-0 bg-cover bg-center transition-all duration-1000 opacity-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/galinhas-caipira.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">üêì Galinhas Caipira Felizes</h1>
                            <p class="text-xl md:text-2xl mb-8">Criadas com liberdade e carinho, nossas galinhas vivem soltas no pasto, resultando em carne mais saborosa e saud√°vel.</p>
                            <a href="#produtos" class="bg-[#8B4513] hover:bg-[#5D4037] text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center">
                                <i class="fas fa-drumstick-bite mr-2"></i> Ver Galinhas
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 3: Adubo Org√¢nico -->
                <div class="carousel-slide absolute inset-0 bg-cover bg-center transition-all duration-1000 opacity-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/adubo-organico.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">üå± Adubo Org√¢nico Natural</h1>
                            <p class="text-xl md:text-2xl mb-8">Fertilizantes org√¢nicos produzidos na pr√≥pria granja. Nutra sua terra com o que h√° de melhor na natureza.</p>
                            <a href="#produtos" class="bg-[#228B22] hover:bg-green-700 text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center">
                                <i class="fas fa-seedling mr-2"></i> Ver Fertilizantes
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 4: Agricultura Familiar -->
                <div class="carousel-slide absolute inset-0 bg-cover bg-center transition-all duration-1000 opacity-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/agricultura-familiar.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">üè° Agricultura Familiar</h1>
                            <p class="text-xl md:text-2xl mb-8">Tradi√ß√£o de gera√ß√µes, sustentabilidade e amor pela terra. Apoie a agricultura familiar brasileira.</p>
                            <a href="#sobre" class="bg-[#D2691E] hover:bg-orange-700 text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center">
                                <i class="fas fa-heart mr-2"></i> Nossa Hist√≥ria
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Slide 5: Novo Slide Adicionado -->
                <div class="carousel-slide absolute inset-0 bg-cover bg-center transition-all duration-1000 opacity-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/Gemini_Generated_Image_c97w7dc97w7dc97w.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">üçΩÔ∏è Sabor que Inspira</h1>
                            <p class="text-xl md:text-2xl mb-8">Nossos produtos na sua mesa, criando momentos inesquec√≠veis.</p>
                            <a href="#produtos" class="bg-[#4CAF50] hover:bg-green-700 text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center">
                                <i class="fas fa-utensils mr-2"></i> Descubra Receitas
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Controles do Carrossel -->
            <button id="prev-slide" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/20 hover:bg-white/40 text-white p-3 rounded-full transition duration-300 z-10">
                <i class="fas fa-chevron-left text-xl"></i>
            </button>
            <button id="next-slide" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/20 hover:bg-white/40 text-white p-3 rounded-full transition duration-300 z-10">
                <i class="fas fa-chevron-right text-xl"></i>
            </button>
            
            <!-- Indicadores -->
            <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-3 z-10">
                <button class="carousel-indicator active w-3 h-3 bg-white rounded-full transition duration-300" data-slide="0"></button>
                <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition duration-300" data-slide="1"></button>
                <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition duration-300" data-slide="2"></button>
                <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition duration-300" data-slide="3"></button>
                <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition duration-300" data-slide="4"></button>
            </div>
        </section>

        <!-- Navega√ß√£o Fixa com Tr√™s Bot√µes Principais -->
        <nav class="fixed-nav">
            <div class="container mx-auto px-6">
                <div class="nav-main-buttons">
                    <!-- Bot√£o Todos -->
                    <button class="nav-button active" onclick="filterProducts('all'); setActiveButton(this)">
                        <i class="fas fa-th-large mr-2"></i>
                        Todos
                    </button>
                    
                    <!-- Bot√£o Produtos da Granja com Dropdown -->
                    <div class="dropdown">
                        <button class="nav-button dropdown-toggle" onclick="filterProducts('granja'); setActiveButton(this)">
                            <i class="fas fa-home mr-2"></i>
                            Produtos da Granja
                        </button>
                        <div class="dropdown-content">
                            <a href="#" onclick="event.preventDefault(); filterProducts('fertilizantes'); setActiveButton(this.closest('.dropdown').querySelector('.nav-button')); return false;">
                                <i class="fas fa-seedling"></i>
                                Fertilizantes
                            </a>
                            <a href="#" onclick="event.preventDefault(); filterProducts('aves'); setActiveButton(this.closest('.dropdown').querySelector('.nav-button')); return false;">
                                <i class="fas fa-drumstick-bite"></i>
                                Aves
                            </a>
                            <a href="#" onclick="event.preventDefault(); filterProducts('ovos'); setActiveButton(this.closest('.dropdown').querySelector('.nav-button')); return false;">
                                <i class="fas fa-egg"></i>
                                Ovos
                            </a>
                        </div>
                    </div>
                    
                    <!-- Bot√£o Parceiros com Dropdown -->
                    <div class="dropdown">
                        <button class="nav-button dropdown-toggle" onclick="filterProducts('parceiros'); setActiveButton(this)">
                            <i class="fas fa-handshake mr-2"></i>
                            Parceiros
                        </button>
                        <div class="dropdown-content">
                            <a href="#" onclick="event.preventDefault(); filterProducts('mel'); setActiveButton(this.closest('.dropdown').querySelector('.nav-button')); return false;">
                                <i class="fas fa-cookie-bite"></i>
                                Mel e Derivados
                            </a>
                            <a href="#" onclick="event.preventDefault(); filterProducts('laticinios'); setActiveButton(this.closest('.dropdown').querySelector('.nav-button')); return false;">
                                <i class="fas fa-wine-glass"></i>
                                Latic√≠nios
                            </a>
                            <a href="#" onclick="event.preventDefault(); filterProducts('outros-parceiros'); setActiveButton(this.closest('.dropdown').querySelector('.nav-button')); return false;">
                                <i class="fas fa-box"></i>
                                Outros Produtos
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Se√ß√£o de Produtos melhorada -->
        <section id="produtos" class="py-20 bg-gray-50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold mb-4 font-lora text-[#5D4037]">Nossos Produtos</h2>
                    <p class="text-center max-w-3xl mx-auto text-gray-600">Cada item √© fruto de um trabalho cuidadoso e sustent√°vel. Conhe√ßa a linha de produtos da Granja Recanto Feliz, pensada para levar mais sa√∫de e sabor para a sua mesa.</p>
                </div>

                <!-- Grade de produtos melhorada -->
                <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                    <!-- Produtos ser√£o renderizados aqui via JavaScript -->
                </div>
            </div>
        </section>

        <!-- Se√ß√£o Sobre N√≥s melhorada -->
        <section id="sobre" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <div class="flex flex-col md:flex-row items-center gap-12">
                    <div class="md:w-1/2">
                        <div class="relative rounded-lg overflow-hidden shadow-xl">
                            <img src="imagens/produtos/8/1.png" alt="Fam√≠lia da Granja" class="w-full h-auto">
                            <div class="absolute inset-0 bg-[#8B4513]/20"></div>
                        </div>
                    </div>
                    <div class="md:w-1/2">
                        <h2 class="text-4xl font-bold mb-6 font-lora text-[#5D4037]">Nossa Hist√≥ria, Nossos Valores</h2>
                        <p class="text-gray-600 mb-4 leading-relaxed">Na Granja Recanto Feliz, a terra √© nossa casa, e a natureza, nossa maior aliada. H√° gera√ß√µes, cultivamos com paix√£o e dedica√ß√£o, seguindo os passos dos nossos antepassados para trazer at√© voc√™ alimentos frescos e de verdade.</p>
                        <p class="text-gray-600 mb-4 leading-relaxed">Mais que uma granja, somos uma fam√≠lia que acredita no poder da agricultura sustent√°vel e no sabor aut√™ntico de uma produ√ß√£o 100% natural e feita com carinho. Respeitamos o ciclo da vida, garantindo o bem-estar dos nossos animais e a sa√∫de do solo que nos alimenta.</p>
                        <div class="bg-[#F5EFE6] p-4 rounded-lg border-l-4 border-[#8B4513]">
                            <p class="text-gray-700 italic">"√â a certeza de que voc√™ est√° levando para casa n√£o apenas um produto, mas um peda√ßo do nosso Recanto Feliz."</p>
                        </div>
                    </div>
                </div>
                
                <!-- Adicionando se√ß√£o de benef√≠cios -->
                <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-[#F5EFE6] p-6 rounded-lg text-center cursor-pointer hover:bg-[#F0E6D6] transition duration-300" onclick="openSustainabilityModal()">
                        <div class="text-[#8B4513] text-3xl mb-4">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2 font-lora">Produ√ß√£o Sustent√°vel</h3>
                        <p class="text-gray-600">Respeitamos o meio ambiente em todos os nossos processos de produ√ß√£o.</p>
                    </div>
                    <div class="bg-[#F5EFE6] p-6 rounded-lg text-center cursor-pointer hover:bg-[#F0E6D6] transition duration-300" onclick="openEggsModal()">
                        <div class="text-[#8B4513] text-3xl mb-4">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2 font-lora">Qualidade Garantida</h3>
                        <p class="text-gray-600">Produtos frescos e de alta qualidade, direto da nossa granja para sua mesa.</p>
                    </div>
                    <div class="bg-[#F5EFE6] p-6 rounded-lg text-center cursor-pointer hover:bg-[#F0E6D6] transition duration-300" onclick="openDeliveryModal()">
                        <div class="text-[#8B4513] text-3xl mb-4">
                            <i class="fas fa-truck"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2 font-lora">Entrega R√°pida</h3>
                        <p class="text-gray-600">Entregamos em at√© 24h ap√≥s o pedido para a regi√£o do Jardim Bot√¢nico e Lago Sul.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o de Contato melhorada -->
        <section id="contato" class="py-20 bg-gray-50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold mb-4 font-lora text-[#5D4037]">Fale Conosco</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">Tem alguma d√∫vida, sugest√£o ou quer fazer um pedido especial? Estamos √† disposi√ß√£o para conversar.</p>
                </div>
                
                <div class="flex justify-center">
                    <div class="max-w-md w-full">
                        <div class="bg-white p-8 rounded-lg shadow-lg mb-6">
                            <h3 class="text-2xl font-bold mb-6 font-lora text-[#5D4037] text-center">Informa√ß√µes de Contato</h3>
                            <div class="space-y-6">
                                <div class="flex items-start">
                                    <i class="fas fa-map-marker-alt text-[#8B4513] text-xl mt-1 mr-4"></i>
                                    <div>
                                        <h4 class="font-semibold">Endere√ßo</h4>
                                        <p class="text-gray-600">Granja Recanto Feliz, Jardim Bot√¢nico, Bras√≠lia - DF</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <i class="fas fa-phone-alt text-[#8B4513] text-xl mt-1 mr-4"></i>
                                    <div>
                                        <h4 class="font-semibold">Telefone</h4>
                                        <p class="text-gray-600">(38) 99924-7376</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <i class="fas fa-envelope text-[#8B4513] text-xl mt-1 mr-4"></i>
                                    <div>
                                        <h4 class="font-semibold">E-mail</h4>
                                        <p class="text-gray-600">comercial@granjarecantofeliz.com</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <a href="https://wa.me/553899247376" target="_blank" class="block bg-[#25D366] hover:bg-green-600 text-white font-bold py-4 px-6 rounded-lg text-center transition duration-300 flex items-center justify-center text-lg shadow-lg">
                            <i class="fab fa-whatsapp mr-3 text-2xl"></i> 
                            <span>Chamar no WhatsApp</span>
                        </a>
                        
                        <p class="mt-6 text-center text-gray-500 text-sm">
                            <i class="fas fa-truck mr-2"></i> Entregas em Bras√≠lia, DF - Jardim Bot√¢nico, Lago Sul e Asa Sul
                        </p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Painel de Administra√ß√£o -->
        <section id="admin-panel" class="py-20 hidden bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-4 font-lora text-[#5D4037]">Painel de Administra√ß√£o</h2>
                <p class="text-center max-w-3xl mx-auto mb-8 text-red-600 font-semibold">Aten√ß√£o: As altera√ß√µes aqui s√£o tempor√°rias e n√£o s√£o salvas ap√≥s recarregar a p√°gina!</p>

                <div id="admin-product-form" class="bg-gray-50 p-8 rounded-lg shadow-lg mb-12 border border-gray-200">
                    <h3 class="text-2xl font-bold font-lora mb-6 text-[#5D4037]">Adicionar/Editar Produto</h3>
                    <input type="hidden" id="edit-product-id">

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="product-name" class="block text-gray-700 text-sm font-bold mb-2">Nome do Produto:</label>
                            <input type="text" id="product-name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-[#8B4513]" placeholder="Ex: Galinha Caipira">
                        </div>
                        <div>
                            <label for="product-slogan" class="block text-gray-700 text-sm font-bold mb-2">Slogan:</label>
                            <input type="text" id="product-slogan" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-[#8B4513]" placeholder="Ex: Sabor aut√™ntico da ro√ßa.">
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <label for="product-description" class="block text-gray-700 text-sm font-bold mb-2">Descri√ß√£o:</label>
                        <textarea id="product-description" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-[#8B4513] h-32" placeholder="Descreva o produto aqui..."></textarea>
                        <button id="generate-description-btn" class="mt-2 bg-[#FDD835] hover:bg-[#FFCA28] text-gray-800 font-bold py-2 px-4 rounded-lg transition duration-300 text-sm flex items-center">
                            <i class="fas fa-magic mr-2"></i> Gerar Descri√ß√£o com IA
                        </button>
                        <div id="ai-loading" class="mt-2 text-sm text-gray-500 hidden">
                            <i class="fas fa-spinner fa-spin mr-2"></i> Gerando...
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="product-category" class="block text-gray-700 text-sm font-bold mb-2">Categoria:</label>
                            <select id="product-category" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-[#8B4513]">
                                <option value="fertilizantes">Fertilizantes</option>
                                <option value="aves">Aves</option>
                                <option value="ovos">Ovos</option>
                            </select>
                        </div>
                        <div>
                            <label for="product-price" class="block text-gray-700 text-sm font-bold mb-2">Pre√ßo Base (R$):</label>
                            <input type="number" id="product-price" step="0.01" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-[#8B4513]" placeholder="Ex: 50.00">
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <label for="product-image-upload" class="block text-gray-700 text-sm font-bold mb-2">Imagem do Produto:</label>
                        <input type="file" id="product-image-upload" accept="image/*" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-[#8B4513]">
                        <div id="image-preview-container" class="mt-4 hidden">
                            <img id="product-image-preview" src="" alt="Pr√©-visualiza√ß√£o da Imagem" class="w-48 h-48 object-cover rounded-lg border border-gray-300">
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <button id="save-product-btn" class="bg-[#4CAF50] hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 flex items-center">
                            <i class="fas fa-save mr-2"></i> Salvar Produto
                        </button>
                        <button id="clear-form-btn" class="bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 flex items-center">
                            <i class="fas fa-broom mr-2"></i> Limpar Formul√°rio
                        </button>
                    </div>
                </div>

                <h3 class="text-2xl font-bold font-lora mb-6 text-[#5D4037]">Produtos Atuais</h3>
                <div id="admin-product-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Produtos ser√£o listados aqui -->
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-[#5D4037] text-white py-12">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center mb-4">
                        <img src="imagens/LOGO 2023.jpg" alt="Logo Granja Recanto Feliz" class="h-16 w-auto mr-3 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold font-lora">Granja Recanto Feliz</h3>
                    </div>
                    <p class="mb-4">Produtos frescos e de qualidade direto da nossa granja para sua mesa.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-white hover:text-[#FDD835] transition duration-300">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-white hover:text-[#FDD835] transition duration-300">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="text-white hover:text-[#FDD835] transition duration-300">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold font-lora mb-4">Links R√°pidos</h3>
                    <ul class="space-y-2">
                        <li><a href="#inicio" class="hover:text-[#FDD835] transition duration-300">In√≠cio</a></li>
                        <li><a href="#produtos" class="hover:text-[#FDD835] transition duration-300">Produtos</a></li>
                        <li><a href="#sobre" class="hover:text-[#FDD835] transition duration-300">Sobre N√≥s</a></li>
                        <li><a href="#contato" class="hover:text-[#FDD835] transition duration-300">Contato</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold font-lora mb-4">Produtos</h3>
                    <ul class="space-y-2">
                        <li><a href="#produtos" class="hover:text-[#FDD835] transition duration-300">Fertilizantes</a></li>
                        <li><a href="#produtos" class="hover:text-[#FDD835] transition duration-300">Aves</a></li>
                        <li><a href="#produtos" class="hover:text-[#FDD835] transition duration-300">Ovos</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold font-lora mb-4">Contato</h3>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fas fa-map-marker-alt mt-1 mr-2 text-[#FDD835]"></i>
                            <span>Granja Recanto Feliz, Jardim Bot√¢nico, Bras√≠lia - DF</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone-alt mr-2 text-[#FDD835]"></i>
                            <span>(38) 99924-7376</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-envelope mr-2 text-[#FDD835]"></i>
                            <span>comercial@granjarecantofeliz.com</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-[#8B4513] mt-8 pt-8 text-center">
                <p>&copy; 2023 Granja Recanto Feliz. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Modal de Bem-estar Animal -->
    <div id="sustainability-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="p-6 border-b flex justify-between items-center">
                <h3 class="text-3xl font-bold font-lora text-[#5D4037] flex items-center">
                    <i class="fas fa-leaf text-green-600 mr-3"></i>
                    Bem-estar Animal & Produ√ß√£o Sustent√°vel
                </h3>
                <button onclick="closeSustainabilityModal()" class="text-3xl text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto flex-grow">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div>
                        <div class="bg-green-50 p-6 rounded-lg border-l-4 border-green-500 mb-6">
                            <h4 class="text-2xl font-bold text-green-700 mb-4 font-lora flex items-center">
                                <i class="fas fa-heart text-red-500 mr-2"></i>
                                O que √© Cage Free?
                            </h4>
                            <p class="text-gray-700 leading-relaxed mb-4">
                                <strong>Cage free</strong> √© uma express√£o em ingl√™s que se refere √† cria√ß√£o de galinhas soltas, sem gaiolas. A prioridade, aqui, √© o bem-estar dos animais e a qualidade do produto entregue ao consumidor.
                            </p>
                            <p class="text-gray-700 leading-relaxed">
                                Nesse sistema, as aves t√™m um tratamento diferenciado, o que as afasta do estresse, trazendo mais conforto e bem-estar. Isso corrobora para que as aves se mantenham ainda mais saud√°veis.
                            </p>
                        </div>
                        
                        <div class="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-500">
                            <h4 class="text-xl font-bold text-blue-700 mb-3 font-lora flex items-center">
                                <i class="fas fa-dove text-blue-500 mr-2"></i>
                                Movimento Crescente
                            </h4>
                            <p class="text-gray-700 leading-relaxed text-sm">
                                Nos √∫ltimos anos, o movimento ganhou o apoio de in√∫meras marcas que se comprometeram, at√© 2025, a consumir apenas alimentos vindos de produ√ß√µes que valorizem o bem-estar animal. Cada vez mais consumidores t√™m se juntado √† ideia, mais conscientes quanto √†s suas escolhas de alimenta√ß√£o.
                            </p>
                        </div>
                    </div>
                    
                    <div>
                        <div class="bg-yellow-50 p-6 rounded-lg border-l-4 border-yellow-500 mb-6">
                            <h4 class="text-2xl font-bold text-yellow-700 mb-4 font-lora flex items-center">
                                <i class="fas fa-feather-alt text-yellow-600 mr-2"></i>
                                Bem-estar para Galinhas Livres
                            </h4>
                            <p class="text-gray-700 leading-relaxed mb-4">
                                Com tanto espa√ßo para se movimentar, as galinhas conseguem viver de modo mais natural. Ao mesmo tempo em que ficam protegidas do clima e de outras adversidades, elas podem manter seu comportamento habitual.
                            </p>
                            
                            <div class="space-y-3">
                                <div class="flex items-center text-gray-700">
                                    <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                    <span>Abrir suas asas e se espregui√ßar</span>
                                </div>
                                <div class="flex items-center text-gray-700">
                                    <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                    <span>Ciscar o ch√£o naturalmente</span>
                                </div>
                                <div class="flex items-center text-gray-700">
                                    <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                    <span>Pular e dar pequenos voos</span>
                                </div>
                                <div class="flex items-center text-gray-700">
                                    <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                    <span>Menor exposi√ß√£o ao estresse</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-[#F5EFE6] p-6 rounded-lg border-l-4 border-[#8B4513]">
                            <h4 class="text-xl font-bold text-[#8B4513] mb-3 font-lora flex items-center">
                                <i class="fas fa-award text-[#8B4513] mr-2"></i>
                                Nosso Compromisso
                            </h4>
                            <p class="text-gray-700 leading-relaxed text-sm italic">
                                "Na Granja Recanto Feliz, acreditamos que animais felizes produzem alimentos mais saud√°veis e saborosos. Por isso, garantimos que nossas aves vivam em liberdade, com todo o cuidado e carinho que merecem."
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 text-center">
                    <div class="bg-gradient-to-r from-green-500 to-blue-500 text-white p-6 rounded-lg">
                        <h4 class="text-2xl font-bold mb-2 font-lora">Qualidade que Voc√™ Pode Confiar</h4>
                        <p class="text-lg">Produtos frescos, naturais e produzidos com respeito ao bem-estar animal</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal dos 5 Motivos para Comer Ovos -->
    <div id="eggs-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col">
            <div class="p-6 border-b flex justify-between items-center">
                <h3 class="text-3xl font-bold font-lora text-[#5D4037] flex items-center">
                    <i class="fas fa-egg text-yellow-500 mr-3"></i>
                    5 Motivos para Comer Ovos Recanto Feliz
                </h3>
                <button onclick="closeEggsModal()" class="text-3xl text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto flex-grow">
                <p class="text-lg text-gray-700 mb-8 text-center font-semibold">
                    5 motivos para voc√™ incluir ovos na sua rotina alimentar.
                </p>
                
                <div class="space-y-6">
                    <!-- Motivo 1 -->
                    <div class="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-500">
                        <h4 class="text-xl font-bold text-blue-700 mb-3 font-lora flex items-center">
                            <span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">1</span>
                            Ovos Caipira Recanto Feliz s√£o fontes de prote√≠na
                        </h4>
                        <p class="text-gray-700 leading-relaxed">
                            Um ovo fornece, em m√©dia, seis gramas de prote√≠na de alta qualidade - o que significa que ele tem todos os amino√°cidos que voc√™ precisa obter, da mesma forma que a carne. A prote√≠na tamb√©m √© considerada a mais "saciante" (satisfat√≥ria) de todos os nutrientes. E lembre-se que cerca de metade da prote√≠na est√° na gema, n√£o apenas na clara.
                        </p>
                    </div>
                    
                    <!-- Motivo 2 -->
                    <div class="bg-green-50 p-6 rounded-lg border-l-4 border-green-500">
                        <h4 class="text-xl font-bold text-green-700 mb-3 font-lora flex items-center">
                            <span class="bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">2</span>
                            Ovos Caipira Recanto Feliz restringem sua fome
                        </h4>
                        <p class="text-gray-700 leading-relaxed">
                            Incluir ovos em seu caf√© da manh√£ atrasa a fome por mais tempo do que as refei√ß√µes √† base de gr√£os. Isso faz com que sua rotina de alimenta√ß√£o seja mais adequada, evitando comer algo sem necessidade antes do hor√°rio de almo√ßo.
                        </p>
                    </div>
                    
                    <!-- Motivo 3 -->
                    <div class="bg-yellow-50 p-6 rounded-lg border-l-4 border-yellow-500">
                        <h4 class="text-xl font-bold text-yellow-700 mb-3 font-lora flex items-center">
                            <span class="bg-yellow-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">3</span>
                            Ovos Caipira Recanto Feliz protegem seus olhos
                        </h4>
                        <p class="text-gray-700 leading-relaxed">
                            Os ovos s√£o ricos em lute√≠na, um pigmento amarelo que se concentra na retina do olho. A lute√≠na ajuda a proteger os olhos da degenera√ß√£o macular, a principal causa da perda de vis√£o. Ele tamb√©m protege contra danos causados por smartphones, tablets e computadores. A lute√≠na do ovo √© encontrada na gema.
                        </p>
                    </div>
                    
                    <!-- Motivo 4 -->
                    <div class="bg-purple-50 p-6 rounded-lg border-l-4 border-purple-500">
                        <h4 class="text-xl font-bold text-purple-700 mb-3 font-lora flex items-center">
                            <span class="bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">4</span>
                            Ovos Caipira Recanto Feliz n√£o s√£o os vil√µes que entopem as art√©rias
                        </h4>
                        <p class="text-gray-700 leading-relaxed">
                            Durante d√©cadas, os ovos foram considerados inimigos da sa√∫de, sendo considerados culpados por aumento do colesterol e do risco de doen√ßas card√≠acas. Diversos estudos e testes comprovaram que os ovos n√£o s√£o nocivos √† sa√∫de se consumidos de maneira adequada e na quantidade correta.
                        </p>
                    </div>
                    
                    <!-- Motivo 5 -->
                    <div class="bg-red-50 p-6 rounded-lg border-l-4 border-red-500">
                        <h4 class="text-xl font-bold text-red-700 mb-3 font-lora flex items-center">
                            <span class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">5</span>
                            Ovos Caipira Recanto Feliz ajudam a manter a massa muscular
                        </h4>
                        <p class="text-gray-700 leading-relaxed">
                            Come√ßamos a perder massa muscular por volta dos 30 anos, em at√© 5% por d√©cada. A perda muscular pode fazer com que voc√™ se sinta fraco, reduza sua resist√™ncia e, eventualmente, aumente o risco de quedas debilitantes quando estiver mais velho. O exerc√≠cio, particularmente o treinamento de for√ßa, ajudar√° a preservar parte deste m√∫sculo, mas obter prote√≠na suficiente tamb√©m √© essencial. Os ovos cont√™m prote√≠na de alta qualidade que repara os m√∫sculos ap√≥s o exerc√≠cio e ajuda a reconstru√≠-los.
                        </p>
                    </div>
                </div>
                
                <div class="mt-8 text-center">
                    <div class="bg-gradient-to-r from-yellow-500 to-orange-500 text-white p-6 rounded-lg">
                        <h4 class="text-2xl font-bold mb-2 font-lora">Ovos Caipira Recanto Feliz</h4>
                        <p class="text-lg mb-2">Qualidade, sabor e nutri√ß√£o em cada ovo</p>
                        <p class="text-sm opacity-90">Fonte: webmd.com</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Entrega R√°pida -->
    <div id="delivery-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col">
            <div class="p-6 border-b flex justify-between items-center">
                <h3 class="text-3xl font-bold font-lora text-[#5D4037] flex items-center">
                    <i class="fas fa-truck text-blue-500 mr-3"></i>
                    Entrega R√°pida
                </h3>
                <button onclick="closeDeliveryModal()" class="text-3xl text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto flex-grow">
                <div class="space-y-6">
                    <div class="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-500">
                        <h4 class="text-2xl font-bold text-blue-700 mb-4 font-lora flex items-center">
                            <i class="fas fa-clock text-blue-500 mr-3"></i>
                            Prazo de Entrega
                        </h4>
                        <p class="text-gray-700 leading-relaxed text-lg">
                            Entregamos em <strong>at√© 24h</strong> ap√≥s o pedido para a regi√£o do Jardim Bot√¢nico, Lago Sul e Asa Sul.
                        </p>
                    </div>
                    
                    <div class="bg-green-50 p-6 rounded-lg border-l-4 border-green-500">
                        <h4 class="text-2xl font-bold text-green-700 mb-4 font-lora flex items-center">
                            <i class="fas fa-map-marker-alt text-green-500 mr-3"></i>
                            √Åreas de Entrega
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="flex items-center text-gray-700">
                                <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                <span class="font-semibold">Jardim Bot√¢nico</span>
                            </div>
                            <div class="flex items-center text-gray-700">
                                <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                <span class="font-semibold">Lago Sul</span>
                            </div>
                            <div class="flex items-center text-gray-700">
                                <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                <span class="font-semibold">Asa Sul</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 p-6 rounded-lg border-l-4 border-yellow-500">
                        <h4 class="text-2xl font-bold text-yellow-700 mb-4 font-lora flex items-center">
                            <i class="fas fa-motorcycle text-yellow-600 mr-3"></i>
                            Servi√ßo de Motoboy
                        </h4>
                        <p class="text-gray-700 leading-relaxed mb-3">
                            Para garantir que seus produtos cheguem frescos e no prazo, utilizamos servi√ßo de motoboy especializado.
                        </p>
                        <div class="bg-yellow-100 p-4 rounded-lg">
                            <p class="text-yellow-800 font-semibold flex items-center">
                                <i class="fas fa-info-circle mr-2"></i>
                                Pode ser cobrada taxa de entrega para utilizar o servi√ßo de motoboy
                            </p>
                        </div>
                    </div>
                    
                    <div class="bg-[#F5EFE6] p-6 rounded-lg border-l-4 border-[#8B4513]">
                        <h4 class="text-2xl font-bold text-[#8B4513] mb-4 font-lora flex items-center">
                            <i class="fas fa-shield-alt text-[#8B4513] mr-3"></i>
                            Garantia de Frescor
                        </h4>
                        <p class="text-gray-700 leading-relaxed">
                            Nossos produtos s√£o embalados com cuidado e entregues rapidamente para manter toda a qualidade e frescor que voc√™ espera da Granja Recanto Feliz.
                        </p>
                    </div>
                </div>
                
                <div class="mt-8 text-center">
                    <div class="bg-gradient-to-r from-blue-500 to-green-500 text-white p-6 rounded-lg">
                        <h4 class="text-2xl font-bold mb-2 font-lora">Produtos Frescos na Sua Mesa</h4>
                        <p class="text-lg">Rapidez, qualidade e conveni√™ncia em cada entrega</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bot√£o flutuante do WhatsApp -->
    <a href="https://wa.me/553899247376" target="_blank" class="fixed bottom-6 right-6 bg-[#25D366] text-white p-4 rounded-full shadow-lg hover:bg-green-600 transition duration-300 z-40 flex items-center justify-center w-16 h-16">
        <i class="fab fa-whatsapp text-2xl"></i>
    </a>

    <!-- Modal de Detalhes do Produto -->
    <div id="product-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="p-4 border-b flex justify-between items-center">
                <h3 id="modal-product-title" class="text-2xl font-bold font-lora text-[#5D4037]">Detalhes do Produto</h3>
                <button id="close-modal-btn" 
                        class="text-3xl text-gray-500 hover:text-gray-800 cursor-pointer z-10 p-2 hover:bg-gray-100 rounded-full transition-all duration-200" 
                        style="pointer-events: auto;"
                        onclick="console.log('üî≤ Onclick disparado'); document.getElementById('product-modal').classList.add('hidden'); document.getElementById('product-modal').style.display='none';">&times;</button>
            </div>
            <div id="modal-content-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6 p-6 overflow-y-auto">
                <!-- Conte√∫do do modal (galeria e detalhes) ser√° injetado aqui pelo JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal do Carrinho -->
    <div id="cart-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col">
            <div class="p-6 border-b flex justify-between items-center">
                <h3 class="text-2xl font-bold font-lora text-[#5D4037]">Seu Carrinho</h3>
                <button onclick="document.getElementById('cart-modal').classList.add('hidden'); document.getElementById('cart-modal').style.display='none';" class="text-2xl text-gray-500 hover:text-gray-800 cursor-pointer">&times;</button>
            </div>
            <div id="cart-items" class="p-6 overflow-y-auto flex-grow">
                <p class="text-gray-500">Seu carrinho est√° vazio.</p>
            </div>
            <div class="p-6 border-t bg-gray-50">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-lg font-semibold">Subtotal:</span>
                    <span id="cart-subtotal" class="text-lg">R$ 0,00</span>
                </div>
                <div class="flex justify-between items-center mb-4">
                    <span class="text-lg font-semibold">Entrega:</span>
                    <span id="delivery-fee" class="text-lg">A calcular</span>
                </div>
                <div class="flex justify-between items-center mb-6 border-t pt-4">
                    <span class="text-xl font-bold">Total:</span>
                    <span id="cart-total" class="text-xl font-bold text-[#5D4037]">R$ 0,00</span>
                </div>
                <div id="checkout-section">
                     <h4 class="text-lg font-semibold mb-2">Verificar Entrega</h4>
                     <input type="text" id="cep-frete" maxlength="9" placeholder="Digite seu CEP" class="w-full p-3 border rounded mb-2 focus:outline-none focus:ring-2 focus:ring-[#8B4513]">
                     <button onclick="verificarFrete()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 mb-3">
                        <i class="fas fa-search mr-2"></i> Verificar Frete
                     </button>
                     <div id="frete-resultado" class="mb-3" style="display: none;"></div>
                     <button id="btn-finalizar" onclick="finalizarViaWhatsApp()" disabled class="w-full bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition duration-300 flex items-center justify-center cursor-not-allowed">
                        <i class="fab fa-whatsapp mr-2"></i> Enviar Pedido via WhatsApp
                     </button>
                     <p class="text-xs text-gray-500 mt-2 text-center">
                        <i class="fas fa-info-circle mr-1"></i> 
                        Voc√™ precisar√° informar seus dados pessoais antes de enviar o pedido
                     </p>
                </div>
            </div>
        </div>
    </div>

    <!-- SQL.js desativado: usar produtos.json como fonte can√¥nica -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script> -->
    <script src="js/modules/product-manager.js"></script>
    <script src="js/modules/layout-manager.js"></script>
    <script src="js/modules/carousel-manager.js"></script>
    <script src="js/modules/sync-manager.js"></script>
    <script src="js/data-manager.js"></script>
    <!-- <script src="js/navigation.js"></script> -->
    <!-- <script src="js/scripts.js"></script> -->
    <script src="js/fix-produtos-minimo.js"></script>
    <script src="js/fix-filtros-carrinho.js"></script>
    <script src="js/fix-modal-completo.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Aguardar DataManager estar completamente carregado
        let products = [];
        
        // Inicializa√ß√£o simples
        async function inicializar() {
            console.log('üîß Inicializando sistema...');
            
            if (!window.dataManager) {
                console.log('üìä Criando DataManager...');
                window.dataManager = new DataManager();
            }
            
            // Inicializar CarouselManager se n√£o foi inicializado automaticamente
            if (!window.carouselManager && window.CarouselManager) {
                console.log('üé† Criando CarouselManager...');
                window.carouselManager = new CarouselManager();
                window.carouselManager.initializeCarousel();
            }
            
            // Aguardar DataManager estar pronto
            setTimeout(() => {
                console.log('üîÑ Tentando carregar produtos via inicializar...');
                if (window.filterProducts) {
                    window.filterProducts('all');
                }
            }, 2000);
        }
        
        // Script m√≠nimo j√° carrega os produtos

        // Fun√ß√£o para descobrir automaticamente todas as imagens de um produto
        async function discoverProductImages(productId) {
            const gallery = [];
            const extensions = ['png', 'jpeg', 'jpg']; // PNG primeiro pois √© mais comum
            
            console.log(`üîç Procurando imagens para produto ${productId}...`);
            
            for (let i = 1; i <= 10; i++) { // Testa at√© 10 imagens
                let foundImage = false;
                
                for (const ext of extensions) {
                    const imagePath = `imagens/produtos/${productId}/${i}.${ext}`;
                    
                    try {
                        // Tenta carregar a imagem para verificar se existe
                        await new Promise((resolve, reject) => {
                            const img = new Image();
                            img.onload = () => {
                                gallery.push(imagePath);
                                foundImage = true;
                                console.log(`‚úÖ Encontrou: ${imagePath}`);
                                resolve();
                            };
                            img.onerror = () => {
                                console.log(`‚ùå N√£o encontrou: ${imagePath}`);
                                reject();
                            };
                            img.src = imagePath;
                        });
                        break; // Se encontrou, para de testar outras extens√µes para este n√∫mero
                    } catch (error) {
                        // Imagem n√£o existe, continua testando
                        continue;
                    }
                }
                
                if (!foundImage) {
                    console.log(`üîç Parou de procurar no n√∫mero ${i} - nenhuma imagem encontrada`);
                    break; // Se n√£o encontrou nenhuma imagem com este n√∫mero, para
                }
            }
            
            console.log(`üìã Total de imagens encontradas para produto ${productId}:`, gallery.length);
            console.log(`üìÇ Imagens: `, gallery);
            
            return gallery.length > 0 ? gallery : [products.find(p => p.id === productId)?.image];
        }

        const productGrid = document.getElementById('product-grid');
        const filterButtons = document.querySelectorAll('.filter-btn');
        
        const productModal = document.getElementById('product-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        
        // Debug: verificar se elementos foram encontrados
        console.log('üîç Debug elementos:');
        console.log('- productGrid:', productGrid ? '‚úÖ' : '‚ùå');
        console.log('- productModal:', productModal ? '‚úÖ' : '‚ùå');
        console.log('- closeModalBtn:', closeModalBtn ? '‚úÖ' : '‚ùå');
        
        const cartButton = document.getElementById('cart-button');
        const cartModal = document.getElementById('cart-modal');
        const closeCartBtn = document.getElementById('close-cart-btn');

        function renderProducts(filter) {
            productGrid.innerHTML = '';
            let filtered;
            
            if (filter === 'all') {
                filtered = products;
            } else if (filter === 'granja') {
                // Produtos da granja: fertilizantes, aves e ovos
                filtered = products.filter(p => 
                    p.category === 'fertilizantes' || 
                    p.category === 'aves' || 
                    p.category === 'ovos'
                );
            } else if (filter === 'parceiros') {
                // Todos os produtos de parceiros
                filtered = products.filter(p => 
                    p.category === 'parceiros' ||
                    p.category === 'mel' ||
                    p.category === 'laticinios' ||
                    p.category === 'outros-parceiros'
                );
            } else {
                // Categoria espec√≠fica
                filtered = products.filter(p => p.category === filter);
            }
            
            if (filtered.length === 0) {
                productGrid.innerHTML = '<p class="col-span-4 text-center text-gray-500">Nenhum produto encontrado nesta categoria.</p>';
                return;
            }

            filtered.forEach(product => {
                const partnerBadge = product.partner ? `
                    <div class="absolute top-2 right-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full flex items-center">
                        <i class="fas fa-handshake mr-1"></i> Parceiro
                    </div>
                ` : '';
                
                const partnerInfo = product.partner ? `
                    <div class="text-sm text-blue-600 mb-2">
                        <i class="fas fa-user mr-1"></i> ${product.partner.producer}
                    </div>
                ` : '';
                
                productGrid.innerHTML += `
                    <div class="product-card bg-white rounded-lg shadow-lg p-6 flex flex-col items-center text-center transition-all duration-300 hover:shadow-xl relative">
                        ${partnerBadge}
                        <img src="${product.image}" alt="${product.name}" class="w-40 h-40 object-cover rounded-lg mb-4" onerror="this.src='imagens/produtos/default/placeholder.png'">
                        <h3 class="text-xl font-bold mb-2 font-lora">${product.name}</h3>
                        ${partnerInfo}
                        <p class="text-gray-600 mb-4 flex-grow">${product.slogan}</p>
                        <span class="text-xl font-bold text-[#5D4037] mb-4">R$ ${product.price.toFixed(2)}</span>
                        <button class="detail-btn bg-[#4CAF50] hover:bg-[#45a049] text-white font-bold py-2 px-4 rounded-lg transition w-full" data-id="${product.id}">
                            <i class="fas fa-shopping-cart mr-2"></i>Comprar
                        </button>
                    </div>
                `;
            });
        }

        async function openProductModal(productId) {
            console.log('üîç Abrindo modal para produto ID:', productId);
            
            // Usar produtos do fix-produtos-minimo.js
            const product = window.produtos ? window.produtos.find(p => p.id == productId) : null;
            
            if (!product) {
                console.error('‚ùå Produto n√£o encontrado:', productId);
                alert('Produto n√£o encontrado!');
                return;
            }

            console.log('‚úÖ Produto encontrado:', product.name);

            // Usar galeria do produto ou a imagem principal
            let gallery = [];
            if (product.gallery && product.gallery.length > 0) {
                gallery = product.gallery;
            } else {
                // Tentar descobrir imagens automaticamente, mas com fallback seguro
                try {
                    gallery = await discoverProductImages(productId);
                } catch (error) {
                    console.warn('‚ö†Ô∏è Erro ao descobrir imagens:', error);
                    gallery = [product.image];
                }
            }
            
            if (!gallery || gallery.length === 0) {
                gallery = [product.image];
            }

            const modalContent = productModal.querySelector('#modal-content-grid');
            
            if (!modalContent) {
                console.error('‚ùå Modal content n√£o encontrado');
                return;
            }
            
            // Criar carrossel de imagens
            modalContent.innerHTML = `
                <div class="p-6 relative">
                    <div id="carousel-container" class="relative overflow-hidden rounded-lg">
                        <div id="carousel-track" class="flex transition-transform duration-300 ease-in-out">
                            ${gallery.map((imgSrc, index) => `
                                <div class="w-full flex-shrink-0">
                                    <img src="${imgSrc}" alt="${product.name} - ${index + 1}" class="w-full h-80 object-cover">
                                </div>
                            `).join('')}
                        </div>
                        ${gallery.length > 1 ? `
                            <button id="prev-btn" class="absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button id="next-btn" class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                            <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
                                ${gallery.map((_, index) => `
                                    <div class="carousel-dot w-2 h-2 rounded-full bg-white/50 cursor-pointer hover:bg-white transition" data-index="${index}"></div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                </div>
                <div class="p-6 flex flex-col">
                    <h3 class="text-3xl font-bold mb-4 font-lora text-[#5D4037]">${product.name}</h3>
                    ${product.partner ? `
                        <div class="bg-blue-50 p-4 rounded-lg mb-4 border-l-4 border-blue-500">
                            <h4 class="font-bold text-blue-700 mb-2 flex items-center">
                                <i class="fas fa-handshake mr-2"></i> Produzido por Parceiro
                            </h4>
                            <div class="text-sm text-blue-600">
                                <p><strong>Produtor:</strong> ${product.partner.producer}</p>
                                <p><strong>Local:</strong> ${product.partner.location}</p>
                                <p><strong>Sobre:</strong> ${product.partner.description}</p>
                            </div>
                        </div>
                    ` : ''}
                    <p class="text-gray-600 mb-6 leading-relaxed flex-grow">${product.description || product.slogan || 'Produto de qualidade da Granja Recanto Feliz.'}</p>
                    <span class="text-2xl font-bold text-[#5D4037] mb-6 block">R$ ${product.price.toFixed(2)}</span>
                    <div class="mb-4">
                        <label class="block text-sm font-bold mb-2">Quantidade:</label>
                        <div class="flex items-center space-x-3">
                            <button id="qty-minus" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-3 rounded">
                                <i class="fas fa-minus"></i>
                            </button>
                            <input id="product-quantity" type="number" value="1" min="1" class="w-20 text-center border rounded py-2">
                            <button id="qty-plus" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-3 rounded">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    <button id="add-to-cart-modal" class="w-full bg-[#4CAF50] hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 flex items-center justify-center">
                        <i class="fas fa-cart-plus mr-2"></i> Adicionar ao Carrinho
                    </button>
                </div>
            `;
            
            // Implementar l√≥gica do carrossel
            let currentIndex = 0;
            const track = modalContent.querySelector('#carousel-track');
            const dots = modalContent.querySelectorAll('.carousel-dot');
            const prevBtn = modalContent.querySelector('#prev-btn');
            const nextBtn = modalContent.querySelector('#next-btn');
            
            function updateCarousel() {
                track.style.transform = `translateX(-${currentIndex * 100}%)`;
                dots.forEach((dot, index) => {
                    dot.classList.toggle('bg-white', index === currentIndex);
                    dot.classList.toggle('bg-white/50', index !== currentIndex);
                });
            }
            
            if (prevBtn) {
                prevBtn.addEventListener('click', () => {
                    currentIndex = currentIndex === 0 ? gallery.length - 1 : currentIndex - 1;
                    updateCarousel();
                });
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    currentIndex = currentIndex === gallery.length - 1 ? 0 : currentIndex + 1;
                    updateCarousel();
                });
            }
            
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    currentIndex = index;
                    updateCarousel();
                });
            });
            
            updateCarousel();
            productModal.classList.remove('hidden');
            productModal.style.display = 'flex';
            
            // Atualizar t√≠tulo do modal
            const modalTitle = productModal.querySelector('#modal-product-title');
            if (modalTitle) {
                modalTitle.textContent = product.name;
            }
            
            console.log('‚úÖ Modal aberto com sucesso para:', product.name);
        }

        // Event listeners removidos - usando apenas o sistema da navega√ß√£o fixa

        // "Comprar" buttons (event delegation on productGrid)
        productGrid.addEventListener('click', function(e) {
            console.log('üñ±Ô∏è Clique detectado:', e.target);
            console.log('üè∑Ô∏è Classes do elemento:', e.target.classList);
            
            // Usar closest para capturar cliques no bot√£o ou √≠cone interno
            const button = e.target.closest('.detail-btn');
            if (button) {
                const id = parseInt(button.getAttribute('data-id'));
                console.log('üéØ Bot√£o comprar clicado, ID:', id);
                openProductModal(id);
            } else {
                console.log('‚ö†Ô∏è Clique n√£o foi em um bot√£o de comprar');
            }
        });
        
        // Gallery thumbnails in modal (event delegation on productModal)
        productModal.addEventListener('click', function(e) {
            if (e.target && e.target.parentElement && e.target.parentElement.id === 'modal-gallery') {
                const mainImage = productModal.querySelector('#modal-main-image img');
                if(mainImage) mainImage.src = e.target.src;
            }
        });

        // Close product modal
        if (closeModalBtn) {
            closeModalBtn.addEventListener('click', () => {
                console.log('üî≤ Bot√£o de fechar clicado (m√©todo tradicional)');
                productModal.classList.add('hidden');
                productModal.style.display = 'none';
            });
        } else {
            console.warn('‚ö†Ô∏è closeModalBtn n√£o encontrado');
        }
        
        // Adicionar tamb√©m delega√ß√£o de eventos para o bot√£o de fechar (backup)
        productModal.addEventListener('click', function(e) {
            if (e.target && e.target.id === 'close-modal-btn') {
                console.log('üî≤ Bot√£o de fechar clicado (delega√ß√£o de eventos)');
                productModal.classList.add('hidden');
                productModal.style.display = 'none';
            }
        });
        
        // Event listener global para bot√£o de fechar (backup adicional)
        document.addEventListener('click', function(e) {
            if (e.target && e.target.id === 'close-modal-btn') {
                console.log('üî≤ Bot√£o de fechar clicado (listener global)');
                productModal.classList.add('hidden');
                productModal.style.display = 'none';
            }
        });
        
        // Fechar modal clicando fora
        productModal.addEventListener('click', (e) => {
            if (e.target === productModal) {
                productModal.classList.add('hidden');
                productModal.style.display = 'none';
            }
        });
        
        // Fechar modal com ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !productModal.classList.contains('hidden')) {
                productModal.classList.add('hidden');
                productModal.style.display = 'none';
            }
        });

        // Event listeners para modal do produto (usando delega√ß√£o)
        productModal.addEventListener('click', function(e) {
            // Bot√µes de quantidade
            if (e.target && e.target.id === 'qty-minus') {
                const qtyInput = productModal.querySelector('#product-quantity');
                if (qtyInput && qtyInput.value > 1) {
                    qtyInput.value = parseInt(qtyInput.value) - 1;
                }
            }
            
            if (e.target && e.target.id === 'qty-plus') {
                const qtyInput = productModal.querySelector('#product-quantity');
                if (qtyInput) {
                    qtyInput.value = parseInt(qtyInput.value) + 1;
                }
            }
            
            // Bot√£o "Adicionar ao Carrinho" - CORRIGIDO
            if (e.target && (e.target.id === 'add-to-cart-modal' || e.target.closest('#add-to-cart-modal'))) {
                console.log('üõí Bot√£o adicionar ao carrinho clicado!');
                
                const qtyInput = productModal.querySelector('#product-quantity');
                const quantity = qtyInput ? parseInt(qtyInput.value) : 1;
                
                // Encontrar o produto atual do modal
                const productTitle = productModal.querySelector('#modal-product-title');
                if (productTitle) {
                    const productName = productTitle.textContent;
                    // Usar window.produtos ao inv√©s de products
                    const product = window.produtos ? window.produtos.find(p => p.name === productName) : null;
                    
                    if (product) {
                        for (let i = 0; i < quantity; i++) {
                            window.adicionarAoCarrinho(product);
                        }
                        
                        // Fechar modal
                        productModal.classList.add('hidden');
                        productModal.style.display = 'none';
                        
                        console.log(`‚úÖ ${quantity}x ${product.name} adicionado(s) ao carrinho`);
                    } else {
                        console.error('‚ùå Produto n√£o encontrado para adicionar ao carrinho');
                    }
                } else {
                    console.error('‚ùå T√≠tulo do produto n√£o encontrado no modal');
                }
            }
        });

        // Open/Close Cart Modal
        if (cartButton) {
            cartButton.addEventListener('click', () => {
                updateCartModal();
                cartModal.classList.remove('hidden');
                cartModal.style.display = 'flex';
            });
        }
        if (closeCartBtn) {
            closeCartBtn.addEventListener('click', () => {
                cartModal.classList.add('hidden');
                cartModal.style.display = 'none';
            });
        }
        
        // Fechar carrinho clicando fora
        cartModal.addEventListener('click', (e) => {
            if (e.target === cartModal) {
                cartModal.classList.add('hidden');
                cartModal.style.display = 'none';
            }
        });

        // Sistema de atualiza√ß√£o autom√°tica DESABILITADO
        
        // TODOS OS SISTEMAS AUTOM√ÅTICOS DESABILITADOS

        // Escutar mudan√ßas de layout vindas da administra√ß√£o
        window.addEventListener('message', function(event) {
            if (event.data && event.data.type === 'layoutChanged') {
                console.log('üé® Layout alterado! Aplicando novo layout...');
                // Usar fun√ß√£o do DataManager
                if (window.dataManager) {
                    window.dataManager.applyCurrentLayout();
                }
            }
        });

        // =============== SISTEMA DE LAYOUTS DIN√ÇMICOS ===============

        // Aplicar layout automaticamente na inicializa√ß√£o
        function initializeLayout() {
            try {
                if (window.dataManager) {
                    // Usar a fun√ß√£o do DataManager ao inv√©s da local
                    const appliedLayout = window.dataManager.applyCurrentLayout();
                    console.log('üé® Layout aplicado via DataManager:', appliedLayout.name);
                }
            } catch (error) {
                console.log('‚ö†Ô∏è Erro ao aplicar layout:', error);
            }
        }

        // Aplicar layout espec√≠fico
        function applyLayout(layout) {
            if (!layout) return;

            try {
                // Aplicar cores CSS customizadas
                if (layout.colors) {
                    const root = document.documentElement;
                    root.style.setProperty('--primary-color', layout.colors.primary);
                    root.style.setProperty('--secondary-color', layout.colors.secondary);
                    root.style.setProperty('--accent-color', layout.colors.accent);
                    root.style.setProperty('--background-color', layout.colors.background);
                }

                // Atualizar texto do banner
                const bannerText = document.querySelector('.banner-text');
                if (bannerText && layout.bannerText) {
                    bannerText.textContent = layout.bannerText;
                }

                // Adicionar classe tem√°tica ao body
                document.body.className = document.body.className.replace(/theme-\w+/g, '');
                if (layout.theme && layout.theme !== 'default') {
                    document.body.classList.add(`theme-${layout.theme}`);
                }

                // Atualizar cores em elementos espec√≠ficos que usam cores hardcoded
                updateDynamicColors(layout.colors);

                console.log('‚úÖ Layout aplicado com sucesso:', layout.name);
            } catch (error) {
                console.error('‚ùå Erro ao aplicar layout:', error);
            }
        }

        // Atualizar cores em elementos espec√≠ficos
        function updateDynamicColors(colors) {
            if (!colors) return;

            // Atualizar bot√µes e elementos com cores espec√≠ficas
            const primaryElements = document.querySelectorAll('.bg-\\[\\#2D5016\\]');
            const secondaryElements = document.querySelectorAll('.bg-\\[\\#8B4513\\]');
            const accentElements = document.querySelectorAll('.bg-\\[\\#228B22\\]');

            // Nota: Para uma implementa√ß√£o completa, seria necess√°rio
            // substituir todas as cores hardcoded por vari√°veis CSS
            // Este √© um exemplo b√°sico de como fazer a atualiza√ß√£o
        }

        // Verificar layouts autom√°ticos periodicamente
        function checkAutoLayouts() {
            try {
                if (window.dataManager) {
                    // Usar fun√ß√£o do DataManager
                    window.dataManager.applyCurrentLayout();
                }
            } catch (error) {
                console.log('‚ö†Ô∏è Erro ao verificar layouts autom√°ticos');
            }
        }

        // Verificar layouts autom√°ticos a cada hora
        setInterval(checkAutoLayouts, 3600000); // 1 hora em millisegundos

        // Inicializar layout na primeira carga
        initializeLayout();
        
        // Verificar se h√° carrossel tem√°tico para aplicar
        if (window.dataManager) {
            const currentLayout = window.dataManager.getCurrentLayout();
            if (currentLayout && currentLayout.carouselThemes) {
                setTimeout(() => {
                    applyLayoutCarousel(currentLayout.carouselThemes);
                }, 200);
            }
        }

        // Aplicar layout tem√°tico atual
        if (window.dataManager) {
            window.dataManager.applyCurrentLayout();
        }
        
        // Inicializar carrossel ap√≥s um pequeno delay
        setTimeout(() => {
            initCarousel();
        }, 100);
        
        // Sistema de detec√ß√£o de mudan√ßas de layout
        function reloadLayoutFromChanges() {
            console.log('üí´ Layout alterado detectado! Reaplicando...');
            if (window.dataManager) {
                // Recarregar dataManager
                window.dataManager = new DataManager();
                const newLayout = window.dataManager.applyCurrentLayout();
                
                // Aplicar carrossel tem√°tico se existir
                if (newLayout && newLayout.carouselThemes) {
                    applyLayoutCarousel(newLayout.carouselThemes);
                } else {
                    // Usar carrossel padr√£o
                    applyDefaultCarousel();
                }
                
                showNotification('Layout atualizado! üé®', 'success');
            } else {
                // Se n√£o conseguir reaplicar, recarregar p√°gina
                setTimeout(() => window.location.reload(), 1000);
            }
        }
        
        // Aplicar carrossel tem√°tico do layout
        function applyLayoutCarousel(layoutThemes) {
            const heroCarousel = document.getElementById('hero-carousel');
            if (!heroCarousel || !layoutThemes.length) return;
            
            console.log('üé† Aplicando carrossel tem√°tico:', layoutThemes.length, 'slides');
            
            // Parar carrossel atual
            clearInterval(carouselInterval);
            
            // Gerar slides dos temas do layout
            heroCarousel.innerHTML = layoutThemes.map((theme, index) => `
                <div class="carousel-slide ${index === 0 ? 'active' : ''} absolute inset-0 bg-cover bg-center transition-all duration-1000 ${index === 0 ? '' : 'opacity-0'}" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('${theme.image}')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">${theme.title}</h1>
                            <p class="text-xl md:text-2xl mb-8">${theme.description}</p>
                            <a href="${theme.buttonLink}" class="text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center" style="background-color: ${theme.buttonColor};">
                                <i class="fas fa-shopping-basket mr-2"></i> ${theme.buttonText}
                            </a>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Atualizar indicadores
            updateCarouselIndicators(layoutThemes.length);
            
            // Reinicializar carrossel
            currentSlide = 0;
            setTimeout(() => {
                initCarousel();
            }, 100);
        }
        
        // Aplicar carrossel padr√£o
        function applyDefaultCarousel() {
            const heroCarousel = document.getElementById('hero-carousel');
            if (!heroCarousel) return;
            
            console.log('üé† Aplicando carrossel padr√£o');
            
            // Parar carrossel atual
            clearInterval(carouselInterval);
            
            // Restaurar slides padr√£o
            heroCarousel.innerHTML = `
                <!-- Slide 1: Ovos Caipira -->
                <div class="carousel-slide active absolute inset-0 bg-cover bg-center transition-all duration-1000" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/ovos-caipira.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6 animate-fade-in">ü•ö Ovos Caipira Aut√™nticos</h1>
                            <p class="text-xl md:text-2xl mb-8 animate-slide-up">Galinhas criadas soltas, alimenta√ß√£o natural, sem horm√¥nios. O sabor puro da natureza em cada ovo.</p>
                            <a href="#produtos" class="bg-[#4CAF50] hover:bg-green-700 text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center animate-bounce-in">
                                <i class="fas fa-shopping-basket mr-2"></i> Ver Ovos Caipira
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 2: Galinhas Caipira -->
                <div class="carousel-slide absolute inset-0 bg-cover bg-center transition-all duration-1000 opacity-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/galinhas-caipira.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">üêì Galinhas Caipira Felizes</h1>
                            <p class="text-xl md:text-2xl mb-8">Criadas com liberdade e carinho, nossas galinhas vivem soltas no pasto, resultando em carne mais saborosa e saud√°vel.</p>
                            <a href="#produtos" class="bg-[#8B4513] hover:bg-[#5D4037] text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center">
                                <i class="fas fa-drumstick-bite mr-2"></i> Ver Galinhas
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 3: Adubo Org√¢nico -->
                <div class="carousel-slide absolute inset-0 bg-cover bg-center transition-all duration-1000 opacity-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/adubo-organico.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">üå± Adubo Org√¢nico Natural</h1>
                            <p class="text-xl md:text-2xl mb-8">Fertilizantes org√¢nicos produzidos na pr√≥pria granja. Nutra sua terra com o que h√° de melhor na natureza.</p>
                            <a href="#produtos" class="bg-[#228B22] hover:bg-green-700 text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center">
                                <i class="fas fa-seedling mr-2"></i> Ver Fertilizantes
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 4: Agricultura Familiar -->
                <div class="carousel-slide absolute inset-0 bg-cover bg-center transition-all duration-1000 opacity-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/agricultura-familiar.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">üè° Agricultura Familiar</h1>
                            <p class="text-xl md:text-2xl mb-8">Tradi√ß√£o de gera√ß√µes, sustentabilidade e amor pela terra. Apoie a agricultura familiar brasileira.</p>
                            <a href="#sobre" class="bg-[#D2691E] hover:bg-orange-700 text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center">
                                <i class="fas fa-heart mr-2"></i> Nossa Hist√≥ria
                            </a>
                        </div>
                    </div>
                </div>
            `;
            
            // Atualizar indicadores para 4 slides padr√£o
            updateCarouselIndicators(4);
            
            // Reinicializar carrossel
            currentSlide = 0;
            setTimeout(() => {
                initCarousel();
            }, 100);
        }
        
        // Atualizar indicadores do carrossel
        function updateCarouselIndicators(count) {
            const indicatorsContainer = document.querySelector('.absolute.bottom-8');
            if (indicatorsContainer) {
                indicatorsContainer.innerHTML = Array.from({length: count}, (_, index) => `
                    <button class="carousel-indicator ${index === 0 ? 'active' : ''} w-3 h-3 ${index === 0 ? 'bg-white' : 'bg-white/50'} rounded-full transition duration-300" data-slide="${index}"></button>
                `).join('');
            }
        }
        
        // 1. Listener para mensagens do admin
        window.addEventListener('message', function(event) {
            if (event.data && event.data.type === 'layoutChanged') {
                console.log('üì® Layout alterado via message:', event.data.layout);
                reloadLayoutFromChanges();
            }
        });
        
        // 2. Listener para BroadcastChannel
        if ('BroadcastChannel' in window) {
            const channel = new BroadcastChannel('layout-changes');
            channel.addEventListener('message', function(event) {
                if (event.data && event.data.type === 'layoutChanged') {
                    console.log('üì° Layout alterado via BroadcastChannel:', event.data.layout);
                    reloadLayoutFromChanges();
                }
            });
        }
        
        // 3. Detectar mudan√ßas no localStorage (m√∫ltiplas formas)
        let lastLayoutNotification = localStorage.getItem('layoutChangeNotification');
        let lastDataCheck = localStorage.getItem('granjaRecantoFelizData');
        
        // Verifica√ß√£o mais frequente e robusta
        setInterval(() => {
            // Verificar notifica√ß√£o espec√≠fica
            const currentNotification = localStorage.getItem('layoutChangeNotification');
            if (currentNotification !== lastLayoutNotification) {
                console.log('üíæ Layout alterado via localStorage notification');
                lastLayoutNotification = currentNotification;
                reloadLayoutFromChanges();
                return; // Evitar dupla execu√ß√£o
            }
            
            // Verificar mudan√ßas diretas nos dados
            const currentData = localStorage.getItem('granjaRecantoFelizData');
            if (currentData !== lastDataCheck) {
                console.log('üíæ Dados alterados no localStorage, verificando layout...');
                lastDataCheck = currentData;
                
                // Verificar se mudou o layout especificamente
                try {
                    const parsedData = JSON.parse(currentData || '{}');
                    if (parsedData.currentLayout || parsedData.layouts) {
                        console.log('üéØ Layout detectado nos dados alterados');
                        reloadLayoutFromChanges();
                    }
                } catch (e) {
                    console.log('Erro ao verificar dados:', e);
                }
            }
        }, 500); // Verificar a cada 0.5 segundos para ser mais responsivo
        
        // Fun√ß√£o para mostrar notifica√ß√µes (se n√£o existir)
        function showNotification(message, type = 'info') {
            console.log(`[${type.toUpperCase()}] ${message}`);
            
            // Criar elemento de notifica√ß√£o visual
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg text-white ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                'bg-blue-500'
            }`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'times' : 'info'} mr-2"></i>
                    ${message}
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    });
    
    // Tornar fun√ß√µes globais
    window.openProductModal = openProductModal;
    
    // FUN√á√ïES ESSENCIAIS QUE ESTAVAM FALTANDO
    
    // Sistema de carrinho
    let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
    
    window.adicionarAoCarrinho = function(produto) {
        if (!produto) {
            console.error('‚ùå Produto inv√°lido para adicionar ao carrinho');
            return;
        }
        
        carrinho.push(produto);
        localStorage.setItem('carrinho', JSON.stringify(carrinho));
        updateCartDisplay();
        
        // Mostrar notifica√ß√£o visual
        showCartNotification(`${produto.name} adicionado ao carrinho!`);
        
        console.log('‚úÖ Produto adicionado ao carrinho:', produto.name);
    };
    
    // Fun√ß√£o para mostrar notifica√ß√£o do carrinho
    function showCartNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'fixed top-20 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300';
        notification.innerHTML = `
            <div class="flex items-center">
                <i class="fas fa-check-circle mr-2"></i>
                ${message}
            </div>
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.style.opacity = '0';
            setTimeout(() => notification.remove(), 300);
        }, 2000);
    }
    
    function updateCartDisplay() {
        const cartCount = document.getElementById('cart-count');
        const cartTotal = document.getElementById('cart-total-display');
        
        if (cartCount) cartCount.textContent = carrinho.length;
        
        if (cartTotal) {
            const total = carrinho.reduce((sum, item) => sum + item.price, 0);
            cartTotal.textContent = `R$ ${total.toFixed(2)}`;
        }
    }
    
    window.updateCartModal = function() {
        const cartItems = document.getElementById('cart-items');
        const cartSubtotal = document.getElementById('cart-subtotal');
        const cartTotalEl = document.getElementById('cart-total');
        
        if (!cartItems) return;
        
        if (carrinho.length === 0) {
            cartItems.innerHTML = '<p class="text-gray-500">Seu carrinho est√° vazio.</p>';
            if (cartSubtotal) cartSubtotal.textContent = 'R$ 0,00';
            if (cartTotalEl) cartTotalEl.textContent = 'R$ 0,00';
            return;
        }
        
        const total = carrinho.reduce((sum, item) => sum + item.price, 0);
        
        cartItems.innerHTML = carrinho.map((item, index) => `
            <div class="flex justify-between items-center py-2 border-b">
                <div>
                    <h4 class="font-semibold">${item.name}</h4>
                    <p class="text-sm text-gray-600">R$ ${item.price.toFixed(2)}</p>
                </div>
                <button onclick="removerDoCarrinho(${index})" class="text-red-500 hover:text-red-700">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        `).join('');
        
        if (cartSubtotal) cartSubtotal.textContent = `R$ ${total.toFixed(2)}`;
        if (cartTotalEl) cartTotalEl.textContent = `R$ ${total.toFixed(2)}`;
    };
    
    window.removerDoCarrinho = function(index) {
        carrinho.splice(index, 1);
        localStorage.setItem('carrinho', JSON.stringify(carrinho));
        updateCartDisplay();
        updateCartModal();
    };
    
    // Inicializar display do carrinho
    updateCartDisplay();
    
    // Fun√ß√µes para o modal de sustentabilidade
    function openSustainabilityModal() {
        const modal = document.getElementById('sustainability-modal');
        modal.classList.remove('hidden');
        modal.style.display = 'flex';
    }
    
    function closeSustainabilityModal() {
        const modal = document.getElementById('sustainability-modal');
        modal.classList.add('hidden');
        modal.style.display = 'none';
    }
    
    // Fechar modal ao clicar fora dele
    document.getElementById('sustainability-modal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeSustainabilityModal();
        }
    });
    
    // Fun√ß√µes para o modal dos ovos
    function openEggsModal() {
        const modal = document.getElementById('eggs-modal');
        modal.classList.remove('hidden');
        modal.style.display = 'flex';
    }
    
    function closeEggsModal() {
        const modal = document.getElementById('eggs-modal');
        modal.classList.add('hidden');
        modal.style.display = 'none';
    }
    
    // Fechar modal dos ovos ao clicar fora dele
    document.getElementById('eggs-modal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeEggsModal();
        }
    });
    
    // Fun√ß√µes para o modal de entrega
    function openDeliveryModal() {
        const modal = document.getElementById('delivery-modal');
        modal.classList.remove('hidden');
        modal.style.display = 'flex';
    }
    
    function closeDeliveryModal() {
        const modal = document.getElementById('delivery-modal');
        modal.classList.add('hidden');
        modal.style.display = 'none';
    }
    
    // Fechar modal de entrega ao clicar fora dele
    document.getElementById('delivery-modal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeDeliveryModal();
        }
    });
    
    // Sistema de Carrossel Moderno
    let currentSlide = 0;
    let carouselInterval;
    
    function initCarousel() {
        // Usar o CarouselManager se dispon√≠vel
        if (window.carouselManager) {
            console.log('üé† Usando CarouselManager para inicializar carrossel');
            window.carouselManager.initializeCarousel();
            return;
        }
        
        // Fallback para implementa√ß√£o manual se CarouselManager n√£o estiver dispon√≠vel
        console.log('‚ö†Ô∏è CarouselManager n√£o encontrado, usando implementa√ß√£o manual');
        
        const slides = document.querySelectorAll('.carousel-slide');
        const indicators = document.querySelectorAll('.carousel-indicator');
        const prevBtn = document.getElementById('prev-slide');
        const nextBtn = document.getElementById('next-slide');
        
        if (!slides.length) {
            console.log('‚ùå Nenhum slide encontrado');
            return;
        }
        
        console.log(`üé† Inicializando carrossel com ${slides.length} slides`);
        
        // Garantir que o primeiro slide est√° ativo
        updateCarousel();
        
        // Auto-play do carrossel (5 segundos)
        carouselInterval = setInterval(() => {
            nextSlide();
        }, 5000);
        
        // Controles manuais
        if (nextBtn) {
            nextBtn.addEventListener('click', (e) => {
                e.preventDefault();
                clearInterval(carouselInterval);
                nextSlide();
                restartAutoPlay();
            });
        }
        
        if (prevBtn) {
            prevBtn.addEventListener('click', (e) => {
                e.preventDefault();
                clearInterval(carouselInterval);
                prevSlide();
                restartAutoPlay();
            });
        }
        
        // Indicadores
        indicators.forEach((indicator, index) => {
            indicator.addEventListener('click', (e) => {
                e.preventDefault();
                clearInterval(carouselInterval);
                goToSlide(index);
                restartAutoPlay();
            });
        });
        
        // Pausar no hover
        const carousel = document.getElementById('hero-carousel');
        if (carousel) {
            carousel.addEventListener('mouseenter', () => {
                clearInterval(carouselInterval);
            });
            
            carousel.addEventListener('mouseleave', () => {
                restartAutoPlay();
            });
        }
        
        console.log('‚úÖ Carrossel inicializado com sucesso');
    }
    
    function nextSlide() {
        const slides = document.querySelectorAll('.carousel-slide');
        currentSlide = (currentSlide + 1) % slides.length;
        console.log(`‚û°Ô∏è Pr√≥ximo slide: ${currentSlide}`);
        updateCarousel();
    }
    
    function prevSlide() {
        const slides = document.querySelectorAll('.carousel-slide');
        currentSlide = currentSlide === 0 ? slides.length - 1 : currentSlide - 1;
        console.log(`‚¨ÖÔ∏è Slide anterior: ${currentSlide}`);
        updateCarousel();
    }
    
    function goToSlide(index) {
        currentSlide = index;
        console.log(`üéØ Indo para slide: ${currentSlide}`);
        updateCarousel();
    }
    
    function updateCarousel() {
        const slides = document.querySelectorAll('.carousel-slide');
        const indicators = document.querySelectorAll('.carousel-indicator');
        
        console.log(`üîÑ Atualizando carrossel - slide ativo: ${currentSlide}`);
        
        slides.forEach((slide, index) => {
            if (index === currentSlide) {
                slide.classList.add('active');
                slide.style.opacity = '1';
                slide.style.zIndex = '2';
            } else {
                slide.classList.remove('active');
                slide.style.opacity = '0';
                slide.style.zIndex = '1';
            }
        });
        
        indicators.forEach((indicator, index) => {
            if (index === currentSlide) {
                indicator.classList.add('active');
                indicator.style.backgroundColor = 'white';
                indicator.style.transform = 'scale(1.2)';
            } else {
                indicator.classList.remove('active');
                indicator.style.backgroundColor = 'rgba(255, 255, 255, 0.5)';
                indicator.style.transform = 'scale(1)';
            }
        });
    }
    
    function restartAutoPlay() {
        clearInterval(carouselInterval);
        carouselInterval = setInterval(() => {
            nextSlide();
        }, 5000);
    }
    
    // Fun√ß√£o global para abrir carrinho
    function openCartModal() {
        console.log('üõí Abrindo carrinho...');
        
        // Debug: verificar localStorage
        const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
        console.log('üì¶ Carrinho atual:', carrinho);
        
        updateCartModal();
        const cartModal = document.getElementById('cart-modal');
        if (cartModal) {
            cartModal.classList.remove('hidden');
            cartModal.style.display = 'flex';
        } else {
            console.error('‚ùå Modal do carrinho n√£o encontrado');
        }
    }
    
    // Tornar fun√ß√£o global
    window.openCartModal = openCartModal;
    
    // Fun√ß√µes para controlar subcategorias
    function showSubcategories() {
        document.getElementById('granja-subcategories').classList.remove('hidden');
    }
    
    function hideSubcategories() {
        document.getElementById('granja-subcategories').classList.add('hidden');
    }
    
    function toggleSubcategories() {
        const subcategories = document.getElementById('granja-subcategories');
        subcategories.classList.toggle('hidden');
    }
    
    // SISTEMA DE FILTROS NOVO E SIMPLES
    window.setActiveButton = function(button) {
        document.querySelectorAll('.nav-button').forEach(btn => btn.classList.remove('active'));
        if (button) button.classList.add('active');
    };
    
    // SISTEMA DE FILTROS SIMPLES E FUNCIONAL
    window.filterProducts = function(category) {
        console.log('üîç Filtrando produtos por:', category);
        
        // Carregar produtos se n√£o existirem
        if (window.renderizarProdutos) {
            window.renderizarProdutos();
        }
        
        // Aguardar produtos carregarem e aplicar filtro
        setTimeout(() => {
            const grid = document.getElementById('product-grid');
            const allCards = grid.querySelectorAll('.product-card');
            
            if (allCards.length === 0) {
                console.log('‚ö†Ô∏è Nenhum produto encontrado para filtrar');
                return;
            }
            
            let visibleCount = 0;
            
            allCards.forEach(card => {
                const button = card.querySelector('.detail-btn');
                const productId = button ? button.getAttribute('data-id') : null;
                
                if (!productId) {
                    card.style.display = 'none';
                    return;
                }
                
                const product = window.produtos ? window.produtos.find(p => p.id == productId) : null;
                
                if (!product) {
                    card.style.display = 'none';
                    return;
                }
                
                let shouldShow = false;
                
                if (category === 'all') {
                    shouldShow = true;
                } else if (category === 'granja') {
                    shouldShow = ['fertilizantes', 'aves', 'ovos'].includes(product.category);
                } else if (category === 'parceiros') {
                    shouldShow = ['parceiros', 'mel', 'laticinios'].includes(product.category);
                } else {
                    shouldShow = product.category === category;
                }
                
                if (shouldShow) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            console.log(`‚úÖ Filtro aplicado: ${visibleCount} produtos vis√≠veis`);
        }, 100);
    };
    
    // Fun√ß√µes j√° s√£o globais acima
    
    // Event listener global para bot√µes de comprar (backup)
    document.addEventListener('click', function(e) {
        // Verificar se o clique foi no bot√£o ou em um elemento filho (como o √≠cone)
        const button = e.target.closest('.detail-btn');
        if (button) {
            const productId = button.getAttribute('data-id');
            console.log('üõí Comprando produto:', productId);
            
            // Encontrar o produto nos dados carregados
            if (window.dataManager) {
                window.dataManager.getActiveProducts().then(products => {
                    const product = products.find(p => p.id == productId);
                    if (product) {
                        // Abrir modal de detalhes
                        openProductModal(parseInt(productId));
                    } else {
                        alert('Produto n√£o encontrado!');
                    }
                });
            } else {
                alert('Sistema n√£o carregado. Tente novamente.');
            }
        }
    });
    
    // Inicializar sistema
    document.addEventListener('DOMContentLoaded', () => {
        console.log('üöÄ Iniciando sistema...');
        
        // Carregar produtos primeiro
        if (window.renderizarProdutos) {
            window.renderizarProdutos();
        }
        
        // Aplicar filtro "todos" ap√≥s carregar
        setTimeout(() => {
            window.filterProducts('all');
        }, 200);
        
        inicializar();
    });
    
    // Fun√ß√£o de debug para for√ßar reaplica√ß√£o do layout
    function debugLayoutReload() {
        console.log('üîß DEBUG: For√ßando reaplica√ß√£o do layout...');
        
        if (window.dataManager) {
            // Mostrar informa√ß√µes do layout atual
            const currentLayout = window.dataManager.getCurrentLayout();
            console.log('Layout atual:', currentLayout);
            
            // Recriar dataManager
            window.dataManager = new DataManager();
            
            // Reaplicar layout
            const newLayout = window.dataManager.applyCurrentLayout();
            console.log('Layout reaplicado:', newLayout);
            
            // Mostrar notifica√ß√£o visual
            showNotification(`Layout debug: ${newLayout.name} aplicado!`, 'success');
            
            // For√ßar atualiza√ß√£o visual
            setTimeout(() => {
                document.body.style.transition = 'all 0.5s ease';
                document.body.style.transform = 'scale(0.98)';
                setTimeout(() => {
                    document.body.style.transform = 'scale(1)';
                }, 100);
            }, 100);
        } else {
            console.error('‚ùå DataManager n√£o encontrado');
            showNotification('Erro: DataManager n√£o carregado', 'error');
        }
    }
    
    // CARREGAMENTO FOR√áADO DE PRODUTOS
    setTimeout(() => {
        console.log('üîÑ Carregamento for√ßado de produtos...');
        
        // Tentar m√∫ltiplas formas de carregar
        if (window.filterProducts) {
            window.filterProducts('all');
        }
        
        if (window.renderizarProdutos) {
            window.renderizarProdutos();
        }
        
        // Se nada funcionar, carregar manualmente
        const grid = document.getElementById('product-grid');
        if (grid && grid.innerHTML.trim() === '') {
            console.log('‚ö†Ô∏è Grid vazio, carregando produtos manualmente...');
            
            // Produtos b√°sicos para teste
            const produtosTeste = [
                {id: 1, name: "Substrato BioF√©rtil", category: "fertilizantes", slogan: "Substrato vivo e completo", price: 15, image: "imagens/produtos/1/1.png"},
                {id: 3, name: "Ovos Caipira 10", category: "ovos", slogan: "10 ovos frescos", price: 15, image: "imagens/produtos/3/1.jpeg"},
                {id: 6, name: "Galinha Caipira Picada", category: "aves", slogan: "Galinha cortada", price: 45, image: "imagens/produtos/6/1.png"}
            ];
            
            grid.innerHTML = produtosTeste.map(p => `
                <div class="product-card bg-white rounded-lg shadow-lg p-6 flex flex-col items-center text-center transition-all duration-300 hover:shadow-xl">
                    <img src="${p.image}" alt="${p.name}" class="w-40 h-40 object-cover rounded-lg mb-4">
                    <h3 class="text-xl font-bold mb-2 font-lora">${p.name}</h3>
                    <p class="text-gray-600 mb-4 flex-grow">${p.slogan}</p>
                    <span class="text-xl font-bold text-[#5D4037] mb-4">R$ ${p.price.toFixed(2)}</span>
                    <button class="detail-btn bg-[#4CAF50] hover:bg-[#45a049] text-white font-bold py-2 px-4 rounded-lg transition w-full" data-id="${p.id}">
                        <i class="fas fa-shopping-cart mr-2"></i>Comprar
                    </button>
                </div>
            `).join('');
            
            console.log('‚úÖ Produtos de teste carregados');
        }
    }, 3000);
    
    // Executar imediatamente quando o script carregar
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                if (window.filterProducts) window.filterProducts('all');
            }, 1000);
        });
    } else {
        setTimeout(() => {
            if (window.filterProducts) window.filterProducts('all');
        }, 1000);
    }
    
    // Sistema de lazy loading otimizado
    function activateLazyLoading() {
        const lazyImages = document.querySelectorAll('img[data-src], .lazy-image');
        
        if ('IntersectionObserver' in window) {
            const imageObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        if (img.dataset.src) {
                            img.src = img.dataset.src;
                            img.removeAttribute('data-src');
                        }
                        img.classList.remove('lazy-image');
                        imageObserver.unobserve(img);
                    }
                });
            }, { rootMargin: '50px' });
            
            lazyImages.forEach(img => imageObserver.observe(img));
        }
    }
    
    // Otimiza√ß√µes de performance
    window.addEventListener('load', () => {
        // Ativar lazy loading
        activateLazyLoading();
        
        // Carregar m√≥dulos de otimiza√ß√£o assincronamente
        const modules = [
            'js/modules/lazy-loader.js',
            'js/modules/mobile-optimizer.js', 
            'js/modules/cache-manager.js'
        ];
        
        modules.forEach(src => {
            const script = document.createElement('script');
            script.src = src;
            script.async = true;
            document.head.appendChild(script);
        });
        
        console.log('‚ö° Otimiza√ß√µes de performance ativadas');
    });
    
    </script>
</body>
</html>