<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Granja Recanto Feliz - E-commerce</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Montserrat:wght@400;600&family=Playfair+Display:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2D5016;
            --secondary-color: #8B4513;
            --accent-color: #228B22;
            --background-color: #F0F8E8;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--background-color, #FDFBF5);
        }
        
        h1, h2, h3, .font-lora {
            font-family: 'Lora', serif;
        }
        
        .hero-bg {
            background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('https://images.unsplash.com/photo-1586771107445-d3ca888129ce?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
        }
        
        /* Dropdown menu styles - Moderno como grandes sites */
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 220px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            z-index: 1000;
            border-radius: 12px;
            border: 1px solid rgba(0,0,0,0.1);
            top: calc(100% + 10px);
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            visibility: hidden;
            transform-origin: top center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            scale: 0.95;
            padding: 8px 0;
        }
        
        .dropdown-content.show {
            display: block;
            opacity: 1;
            visibility: visible;
            scale: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        .dropdown-content a {
            color: #374151;
            padding: 14px 20px;
            text-decoration: none;
            display: flex;
            align-items: center;
            transition: all 0.2s ease;
            border-radius: 8px;
            margin: 2px 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
        }
        
        .dropdown-content a:hover {
            background: linear-gradient(135deg, #F3F4F6, #E5E7EB);
            color: var(--primary-color, #2D5016);
            transform: translateX(4px);
        }
        
        .dropdown-content a:active {
            background: linear-gradient(135deg, var(--accent-color, #228B22), #16A34A);
            color: white;
            transform: translateX(4px) scale(0.98);
        }
        
        .dropdown-content a i {
            width: 18px;
            font-size: 14px;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }
        
        .dropdown-content a:hover i {
            opacity: 1;
        }
        
        /* Mostrar dropdown no hover */
        .dropdown:hover .dropdown-content {
            display: block;
            opacity: 1;
            visibility: visible;
            scale: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        /* Mostrar dropdown quando tem classe 'open' */
        .dropdown.open .dropdown-content {
            display: block;
            opacity: 1;
            visibility: visible;
            scale: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        /* Seta indicadora melhorada */
        .dropdown-content::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid white;
            filter: drop-shadow(0 -2px 4px rgba(0,0,0,0.1));
        }
        
        .nav-button {
            background: linear-gradient(135deg, var(--primary-color, #2D5016), var(--secondary-color, #8B4513));
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 16px;
            position: relative;
        }
        
        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .nav-button.active {
            background: linear-gradient(135deg, var(--accent-color, #228B22), var(--primary-color, #2D5016));
        }
        
        /* Indicador visual para botões com dropdown */
        .dropdown-toggle::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-bottom: 6px solid var(--secondary-color, #8B4513);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .dropdown.open .dropdown-toggle::after,
        .dropdown:hover .dropdown-toggle::after {
            opacity: 1;
        }
        
        /* Animações modernas */
        @keyframes fade-in {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fade-in {
            animation: fade-in 0.5s ease-out forwards;
        }
        
        /* Melhorias responsivas para dropdown */
        @media (max-width: 768px) {
            .dropdown-content {
                min-width: 200px;
                left: 0;
                right: 0;
                transform: none;
                margin: 0 auto;
            }
            
            .dropdown-content::before {
                left: 50%;
            }
        }
        
        /* Estados de loading */
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-color, #2D5016);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Fixed navigation bar */
        .fixed-nav {
            position: sticky;
            top: 80px;
            z-index: 40;
            background: rgba(253, 251, 245, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--secondary-color, #8B4513);
        }
        
        /* Classes temáticas dinâmicas */
        .theme-diaDosPais {
            --primary-color: #1E3A8A;
            --secondary-color: #7C2D12;
            --accent-color: #0EA5E9;
            --background-color: #EFF6FF;
        }
        
        .theme-diadasMaes {
            --primary-color: #BE185D;
            --secondary-color: #A21CAF;
            --accent-color: #F472B6;
            --background-color: #FDF2F8;
        }
        
        .theme-natal {
            --primary-color: #DC2626;
            --secondary-color: #059669;
            --accent-color: #FBBF24;
            --background-color: #FEF3C7;
        }
        
        .theme-pascoa {
            --primary-color: #7C3AED;
            --secondary-color: #F59E0B;
            --accent-color: #10B981;
            --background-color: #F3E8FF;
        }
        
        .theme-modernoRustico {
            --primary-color: #5A7247;
            --secondary-color: #8B5A2B;
            --accent-color: #D4B896;
            --background-color: #F5E6D3;
            font-family: 'Open Sans', sans-serif;
        }
        
        .theme-modernoRustico h1,
        .theme-modernoRustico h2,
        .theme-modernoRustico h3,
        .theme-modernoRustico .font-lora {
            font-family: 'Playfair Display', serif;
        }
        
        .theme-modernoRustico .product-card {
            background: linear-gradient(145deg, #f5e6d3, #e8d4b8);
            border: 2px solid #8B5A2B;
            box-shadow: 
                inset 2px 2px 4px rgba(139, 90, 43, 0.1),
                2px 2px 8px rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            position: relative;
        }
        
        .theme-modernoRustico .product-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #8B5A2B, #5A7247);
            border-radius: 10px;
            z-index: -1;
        }
        
        .theme-modernoRustico .btn-primary {
            background: linear-gradient(145deg, #5A7247, #4a5f3a);
            border: 1px solid #8B5A2B;
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .theme-modernoRustico .btn-primary:hover {
            background: linear-gradient(145deg, #4a5f3a, #5A7247);
            transform: translateY(-1px);
            box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.25);
        }
        
        .theme-modernoRustico .banner-text {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            font-family: 'Playfair Display', serif;
        }
        
        /* Layouts de Brasília */
        .theme-aniversarioBrasilia {
            --primary-color: #1E40AF;
            --secondary-color: #F59E0B;
            --accent-color: #059669;
            --background-color: #DBEAFE;
        }
        
        .theme-diaDoCerrado {
            --primary-color: #92400E;
            --secondary-color: #059669;
            --accent-color: #FBBF24;
            --background-color: #FEF3C7;
        }
        
        .theme-festaJuninaPlanalto {
            --primary-color: #DC2626;
            --secondary-color: #F59E0B;
            --accent-color: #7C3AED;
            --background-color: #FDF2F8;
        }
        
        .theme-conscienciaNegraBsb {
            --primary-color: #1F2937;
            --secondary-color: #F59E0B;
            --accent-color: #059669;
            --background-color: #F9FAFB;
        }
        
        /* Efeitos especiais para layouts de Brasília */
        .theme-aniversarioBrasilia .hero-section {
            background: linear-gradient(135deg, #1E40AF, #3B82F6, #F59E0B);
        }
        
        .theme-diaDoCerrado .hero-section {
            background: linear-gradient(135deg, #92400E, #059669, #FBBF24);
        }
        
        .theme-festaJuninaPlanalto .hero-section {
            background: linear-gradient(135deg, #DC2626, #F59E0B, #7C3AED);
        }
        
        .theme-conscienciaNegraBsb .hero-section {
            background: linear-gradient(135deg, #1F2937, #F59E0B, #059669);
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        /* Estilos temáticos */
        .theme-diadasMaes {
            background: linear-gradient(135deg, #FDF2F8, #FCE7F3) !important;
        }
        .theme-diadasMaes .bg-\[\#F5EFE6\] {
            background: linear-gradient(145deg, #FDF2F8, #FCE7F3) !important;
            border: 2px solid #F472B6 !important;
            box-shadow: 0 8px 25px rgba(244, 114, 182, 0.3) !important;
        }
        .theme-diadasMaes .bg-\[\#8B4513\] {
            background: linear-gradient(135deg, #BE185D, #F472B6) !important;
            border-radius: 25px !important;
        }
        
        .theme-natal {
            background: linear-gradient(135deg, #FEF3C7, #FEF9C3) !important;
        }
        .theme-natal .bg-\[\#F5EFE6\] {
            background: linear-gradient(145deg, #FEF3C7, #FEF9C3) !important;
            border: 3px solid #FBBF24 !important;
            box-shadow: 0 8px 25px rgba(251, 191, 36, 0.4) !important;
        }
        .theme-natal .bg-\[\#8B4513\] {
            background: linear-gradient(135deg, #DC2626, #059669) !important;
            border: 2px solid #FBBF24 !important;
            border-radius: 30px !important;
        }
        
        .theme-pascoa {
            background: linear-gradient(135deg, #F3E8FF, #EDE9FE) !important;
        }
        .theme-pascoa .bg-\[\#F5EFE6\] {
            background: linear-gradient(145deg, #F3E8FF, #EDE9FE) !important;
            border: 2px solid #10B981 !important;
            border-radius: 20px !important;
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3) !important;
        }
        .theme-pascoa .bg-\[\#8B4513\] {
            background: linear-gradient(135deg, #7C3AED, #10B981) !important;
            border-radius: 25px !important;
        }
        
        /* Animações decorativas */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .theme-decoration {
            animation: float 3s ease-in-out infinite;
        }
        
        /* Animações do Carrossel */
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slide-up {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes bounce-in {
            0% { opacity: 0; transform: scale(0.3); }
            50% { opacity: 1; transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        .animate-fade-in {
            animation: fade-in 1s ease-out 0.5s both;
        }
        .animate-slide-up {
            animation: slide-up 1s ease-out 1s both;
        }
        .animate-bounce-in {
            animation: bounce-in 1s ease-out 1.5s both;
        }
        
        .carousel-slide {
            transition: opacity 1s ease-in-out;
        }
        .carousel-slide.active {
            opacity: 1 !important;
        }
        
        .carousel-indicator.active {
            background-color: white !important;
            transform: scale(1.2);
        }
    </style>
</head>
<body class="text-gray-800">
    <!-- Header melhorado com mais destaque para o carrinho -->
    <header id="header" class="bg-[#FDFBF5]/80 backdrop-blur-sm sticky top-0 z-50 shadow-md transition-all duration-300">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#inicio" class="text-2xl font-bold font-lora text-[#5D4037] flex items-center">
                <img src="imagens/LOGO 2023.jpg" alt="Logo Granja Recanto Feliz" class="h-12 w-auto mr-3 rounded-lg shadow-sm">
                <span class="hidden sm:block">Granja Recanto Feliz</span>
            </a>
            <div class="hidden md:flex space-x-8">
                <a href="#inicio" class="nav-link text-gray-600 hover:text-[#5D4037] pb-1">Início</a>
                <a href="#produtos" class="nav-link text-gray-600 hover:text-[#5D4037] pb-1">Produtos</a>
                <a href="#sobre" class="nav-link text-gray-600 hover:text-[#5D4037] pb-1">Sobre Nós</a>
                <a href="#contato" class="nav-link text-gray-600 hover:text-[#5D4037] pb-1">Contato</a>
                <a href="admin.html" class="nav-link text-red-600 hover:text-red-800 pb-1 font-bold">Admin</a>
            </div>
            <div class="flex items-center space-x-4">
                <button id="cart-button" onclick="document.getElementById('cart-modal').classList.remove('hidden'); document.getElementById('cart-modal').style.display='flex'; updateCartModal();" class="relative flex items-center bg-[#8B4513] hover:bg-[#5D4037] text-white px-4 py-2 rounded-lg transition duration-300 cursor-pointer">
                    <i class="fas fa-shopping-cart mr-2"></i>
                    <span class="mr-2">Carrinho</span>
                    <span id="cart-count" class="cart-counter bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold">0</span>
                    <span id="cart-total-display" class="ml-2 text-sm font-bold">R$ 0,00</span>
                </button>
                <button id="mobile-menu-button" class="md:hidden text-2xl">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </nav>
        <!-- Menu mobile melhorado -->
        <div id="mobile-menu" class="hidden md:hidden bg-[#FDFBF5] py-4 shadow-lg">
            <a href="#inicio" class="block text-center py-3 text-gray-600 hover:text-[#5D4037] hover:bg-gray-100"><i class="fas fa-home mr-2"></i>Início</a>
            <a href="#produtos" class="block text-center py-3 text-gray-600 hover:text-[#5D4037] hover:bg-gray-100"><i class="fas fa-shopping-basket mr-2"></i>Produtos</a>
            <a href="#sobre" class="block text-center py-3 text-gray-600 hover:text-[#5D4037] hover:bg-gray-100"><i class="fas fa-info-circle mr-2"></i>Sobre Nós</a>
            <a href="#contato" class="block text-center py-3 text-gray-600 hover:text-[#5D4037] hover:bg-gray-100"><i class="fas fa-envelope mr-2"></i>Contato</a>
            <a href="admin.html" class="block text-center py-3 text-red-600 hover:text-red-800 hover:bg-red-50 font-bold"><i class="fas fa-cog mr-2"></i>Admin</a>
        </div>
    </header>

    <!-- Barra de Navegação Fixa com Categorias Principais -->
    <nav class="fixed-nav py-4">
        <div class="container mx-auto px-6">
            <div class="flex justify-center space-x-8">
                <!-- Botão Todos -->
                <button class="nav-button" onclick="selectCategoryModern('all')" id="nav-all">
                    <i class="fas fa-border-all mr-2"></i>
                    Todos
                </button>
                
                <!-- Botão Produtos da Granja com Dropdown -->
                <div class="dropdown" id="dropdown-granja">
                    <button class="nav-button dropdown-toggle" onclick="toggleDropdown('dropdown-granja')" id="nav-granja">
                        <i class="fas fa-home mr-2"></i>
                        Produtos da Granja
                        <i class="fas fa-chevron-down ml-2"></i>
                    </button>
                    <div class="dropdown-content" id="dropdown-granja-content">
                        <a href="#" onclick="event.preventDefault(); selectCategory('fertilizantes', 'Fertilizantes')">
                            <i class="fas fa-seedling mr-2"></i>Fertilizantes
                        </a>
                        <a href="#" onclick="event.preventDefault(); selectCategory('aves', 'Aves')">
                            <i class="fas fa-drumstick-bite mr-2"></i>Aves
                        </a>
                        <a href="#" onclick="event.preventDefault(); selectCategory('ovos', 'Ovos')">
                            <i class="fas fa-egg mr-2"></i>Ovos
                        </a>
                        <a href="#" onclick="event.preventDefault(); selectCategory('granja', 'Todos da Granja')">
                            <i class="fas fa-list mr-2"></i>Todos da Granja
                        </a>
                    </div>
                </div>
                
                <!-- Botão Parceiros com Dropdown -->
                <div class="dropdown" id="dropdown-parceiros">
                    <button class="nav-button dropdown-toggle" onclick="toggleDropdown('dropdown-parceiros')" id="nav-parceiros">
                        <i class="fas fa-handshake mr-2"></i>
                        Parceiros
                        <i class="fas fa-chevron-down ml-2"></i>
                    </button>
                    <div class="dropdown-content" id="dropdown-parceiros-content">
                        <a href="#" onclick="event.preventDefault(); selectCategory('parceiros', 'Todos os Parceiros')">
                            <i class="fas fa-store mr-2"></i>Todos os Parceiros
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <!-- Carrossel Hero Moderno -->
        <section id="inicio" class="relative min-h-screen overflow-hidden">
            <div id="hero-carousel" class="relative w-full h-screen">
                <!-- Slide 1: Ovos Caipira -->
                <div class="carousel-slide active absolute inset-0 bg-cover bg-center transition-all duration-1000" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/ovos-caipira.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6 animate-fade-in">🥚 Ovos Caipira Autênticos</h1>
                            <p class="text-xl md:text-2xl mb-8 animate-slide-up">Galinhas criadas soltas, alimentação natural, sem hormônios. O sabor puro da natureza em cada ovo.</p>
                            <a href="#produtos" class="bg-[#4CAF50] hover:bg-green-700 text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center animate-bounce-in">
                                <i class="fas fa-shopping-basket mr-2"></i> Ver Ovos Caipira
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 2: Galinhas Caipira -->
                <div class="carousel-slide absolute inset-0 bg-cover bg-center transition-all duration-1000 opacity-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/galinhas-caipira.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">🐓 Galinhas Caipira Felizes</h1>
                            <p class="text-xl md:text-2xl mb-8">Criadas com liberdade e carinho, nossas galinhas vivem soltas no pasto, resultando em carne mais saborosa e saudável.</p>
                            <a href="#produtos" class="bg-[#8B4513] hover:bg-[#5D4037] text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center">
                                <i class="fas fa-drumstick-bite mr-2"></i> Ver Galinhas
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 3: Adubo Orgânico -->
                <div class="carousel-slide absolute inset-0 bg-cover bg-center transition-all duration-1000 opacity-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/adubo-organico.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">🌱 Adubo Orgânico Natural</h1>
                            <p class="text-xl md:text-2xl mb-8">Fertilizantes orgânicos produzidos na própria granja. Nutra sua terra com o que há de melhor na natureza.</p>
                            <a href="#produtos" class="bg-[#228B22] hover:bg-green-700 text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center">
                                <i class="fas fa-seedling mr-2"></i> Ver Fertilizantes
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 4: Agricultura Familiar -->
                <div class="carousel-slide absolute inset-0 bg-cover bg-center transition-all duration-1000 opacity-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/agricultura-familiar.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">🏡 Agricultura Familiar</h1>
                            <p class="text-xl md:text-2xl mb-8">Tradição de gerações, sustentabilidade e amor pela terra. Apoie a agricultura familiar brasileira.</p>
                            <a href="#sobre" class="bg-[#D2691E] hover:bg-orange-700 text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center">
                                <i class="fas fa-heart mr-2"></i> Nossa História
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Controles do Carrossel -->
            <button id="prev-slide" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/20 hover:bg-white/40 text-white p-3 rounded-full transition duration-300 z-10">
                <i class="fas fa-chevron-left text-xl"></i>
            </button>
            <button id="next-slide" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/20 hover:bg-white/40 text-white p-3 rounded-full transition duration-300 z-10">
                <i class="fas fa-chevron-right text-xl"></i>
            </button>
            
            <!-- Indicadores -->
            <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-3 z-10">
                <button class="carousel-indicator active w-3 h-3 bg-white rounded-full transition duration-300" data-slide="0"></button>
                <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition duration-300" data-slide="1"></button>
                <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition duration-300" data-slide="2"></button>
                <button class="carousel-indicator w-3 h-3 bg-white/50 rounded-full transition duration-300" data-slide="3"></button>
            </div>
        </section>

        <!-- Seção de Produtos com nova estrutura -->
        <section id="produtos" class="py-20 bg-gradient-to-br from-[#F0F8E8] to-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold mb-4 font-lora text-[#5D4037]">Nossos Produtos</h2>
                    <p class="text-center max-w-3xl mx-auto text-gray-600">Cada item é fruto de um trabalho cuidadoso e sustentável. Conheça a linha de produtos da Granja Recanto Feliz, pensada para levar mais saúde e sabor para a sua mesa.</p>
                    
                    <!-- Indicador de Filtro Ativo -->
                    <div id="filter-indicator" class="mt-6 p-3 bg-white rounded-lg shadow-sm border-l-4 border-[#8B4513] inline-block">
                        <span class="text-[#5D4037] font-semibold">Exibindo: </span>
                        <span id="filter-text" class="text-[#8B4513] font-bold">Todos os Produtos</span>
                    </div>
                </div>

                <!-- Grade de produtos melhorada -->
                <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                    <!-- Produtos serão renderizados aqui via JavaScript -->
                </div>
            </div>
        </section>

        <!-- Seção Sobre Nós melhorada -->
        <section id="sobre" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <div class="flex flex-col md:flex-row items-center gap-12">
                    <div class="md:w-1/2">
                        <div class="relative rounded-lg overflow-hidden shadow-xl">
                            <img src="imagens/produtos/8/1.png" alt="Família da Granja" class="w-full h-auto">
                            <div class="absolute inset-0 bg-[#8B4513]/20"></div>
                        </div>
                    </div>
                    <div class="md:w-1/2">
                        <h2 class="text-4xl font-bold mb-6 font-lora text-[#5D4037]">Nossa História, Nossos Valores</h2>
                        <p class="text-gray-600 mb-4 leading-relaxed">Na Granja Recanto Feliz, a terra é nossa casa, e a natureza, nossa maior aliada. Há gerações, cultivamos com paixão e dedicação, seguindo os passos dos nossos antepassados para trazer até você alimentos frescos e de verdade.</p>
                        <p class="text-gray-600 mb-4 leading-relaxed">Mais que uma granja, somos uma família que acredita no poder da agricultura sustentável e no sabor autêntico de uma produção 100% natural e feita com carinho. Respeitamos o ciclo da vida, garantindo o bem-estar dos nossos animais e a saúde do solo que nos alimenta.</p>
                        <div class="bg-[#F5EFE6] p-4 rounded-lg border-l-4 border-[#8B4513]">
                            <p class="text-gray-700 italic">"É a certeza de que você está levando para casa não apenas um produto, mas um pedaço do nosso Recanto Feliz."</p>
                        </div>
                    </div>
                </div>
                
                <!-- Adicionando seção de benefícios -->
                <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-[#F5EFE6] p-6 rounded-lg text-center cursor-pointer hover:bg-[#F0E6D6] transition duration-300" onclick="openSustainabilityModal()">
                        <div class="text-[#8B4513] text-3xl mb-4">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2 font-lora">Produção Sustentável</h3>
                        <p class="text-gray-600">Respeitamos o meio ambiente em todos os nossos processos de produção.</p>
                    </div>
                    <div class="bg-[#F5EFE6] p-6 rounded-lg text-center cursor-pointer hover:bg-[#F0E6D6] transition duration-300" onclick="openEggsModal()">
                        <div class="text-[#8B4513] text-3xl mb-4">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2 font-lora">Qualidade Garantida</h3>
                        <p class="text-gray-600">Produtos frescos e de alta qualidade, direto da nossa granja para sua mesa.</p>
                    </div>
                    <div class="bg-[#F5EFE6] p-6 rounded-lg text-center cursor-pointer hover:bg-[#F0E6D6] transition duration-300" onclick="openDeliveryModal()">
                        <div class="text-[#8B4513] text-3xl mb-4">
                            <i class="fas fa-truck"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2 font-lora">Entrega Rápida</h3>
                        <p class="text-gray-600">Entregamos em até 24h após o pedido para a região do Jardim Botânico e Lago Sul.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Seção de Contato melhorada -->
        <section id="contato" class="py-20 bg-gray-50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold mb-4 font-lora text-[#5D4037]">Fale Conosco</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">Tem alguma dúvida, sugestão ou quer fazer um pedido especial? Estamos à disposição para conversar.</p>
                </div>
                
                <div class="flex justify-center">
                    <div class="max-w-md w-full">
                        <div class="bg-white p-8 rounded-lg shadow-lg mb-6">
                            <h3 class="text-2xl font-bold mb-6 font-lora text-[#5D4037] text-center">Informações de Contato</h3>
                            <div class="space-y-6">
                                <div class="flex items-start">
                                    <i class="fas fa-map-marker-alt text-[#8B4513] text-xl mt-1 mr-4"></i>
                                    <div>
                                        <h4 class="font-semibold">Endereço</h4>
                                        <p class="text-gray-600">Granja Recanto Feliz, Jardim Botânico, Brasília - DF</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <i class="fas fa-phone-alt text-[#8B4513] text-xl mt-1 mr-4"></i>
                                    <div>
                                        <h4 class="font-semibold">Telefone</h4>
                                        <p class="text-gray-600">(38) 99924-7376</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <i class="fas fa-envelope text-[#8B4513] text-xl mt-1 mr-4"></i>
                                    <div>
                                        <h4 class="font-semibold">E-mail</h4>
                                        <p class="text-gray-600">comercial@granjarecantofeliz.com</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <a href="https://wa.me/553899247376" target="_blank" class="block bg-[#25D366] hover:bg-green-600 text-white font-bold py-4 px-6 rounded-lg text-center transition duration-300 flex items-center justify-center text-lg shadow-lg">
                            <i class="fab fa-whatsapp mr-3 text-2xl"></i> 
                            <span>Chamar no WhatsApp</span>
                        </a>
                        
                        <p class="mt-6 text-center text-gray-500 text-sm">
                            <i class="fas fa-truck mr-2"></i> Entregas em Brasília, DF - Jardim Botânico, Lago Sul e Asa Sul
                        </p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Painel de Administração -->
        <section id="admin-panel" class="py-20 hidden bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-4 font-lora text-[#5D4037]">Painel de Administração</h2>
                <p class="text-center max-w-3xl mx-auto mb-8 text-red-600 font-semibold">Atenção: As alterações aqui são temporárias e não são salvas após recarregar a página!</p>

                <div id="admin-product-form" class="bg-gray-50 p-8 rounded-lg shadow-lg mb-12 border border-gray-200">
                    <h3 class="text-2xl font-bold font-lora mb-6 text-[#5D4037]">Adicionar/Editar Produto</h3>
                    <input type="hidden" id="edit-product-id">

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="product-name" class="block text-gray-700 text-sm font-bold mb-2">Nome do Produto:</label>
                            <input type="text" id="product-name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-[#8B4513]" placeholder="Ex: Galinha Caipira">
                        </div>
                        <div>
                            <label for="product-slogan" class="block text-gray-700 text-sm font-bold mb-2">Slogan:</label>
                            <input type="text" id="product-slogan" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-[#8B4513]" placeholder="Ex: Sabor autêntico da roça.">
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <label for="product-description" class="block text-gray-700 text-sm font-bold mb-2">Descrição:</label>
                        <textarea id="product-description" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-[#8B4513] h-32" placeholder="Descreva o produto aqui..."></textarea>
                        <button id="generate-description-btn" class="mt-2 bg-[#FDD835] hover:bg-[#FFCA28] text-gray-800 font-bold py-2 px-4 rounded-lg transition duration-300 text-sm flex items-center">
                            <i class="fas fa-magic mr-2"></i> Gerar Descrição com IA
                        </button>
                        <div id="ai-loading" class="mt-2 text-sm text-gray-500 hidden">
                            <i class="fas fa-spinner fa-spin mr-2"></i> Gerando...
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="product-category" class="block text-gray-700 text-sm font-bold mb-2">Categoria:</label>
                            <select id="product-category" class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-[#8B4513]">
                                <option value="fertilizantes">Fertilizantes</option>
                                <option value="aves">Aves</option>
                                <option value="ovos">Ovos</option>
                            </select>
                        </div>
                        <div>
                            <label for="product-price" class="block text-gray-700 text-sm font-bold mb-2">Preço Base (R$):</label>
                            <input type="number" id="product-price" step="0.01" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-[#8B4513]" placeholder="Ex: 50.00">
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <label for="product-image-upload" class="block text-gray-700 text-sm font-bold mb-2">Imagem do Produto:</label>
                        <input type="file" id="product-image-upload" accept="image/*" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-[#8B4513]">
                        <div id="image-preview-container" class="mt-4 hidden">
                            <img id="product-image-preview" src="" alt="Pré-visualização da Imagem" class="w-48 h-48 object-cover rounded-lg border border-gray-300">
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <button id="save-product-btn" class="bg-[#4CAF50] hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 flex items-center">
                            <i class="fas fa-save mr-2"></i> Salvar Produto
                        </button>
                        <button id="clear-form-btn" class="bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-lg focus:outline-none focus:shadow-outline transition duration-300 flex items-center">
                            <i class="fas fa-broom mr-2"></i> Limpar Formulário
                        </button>
                    </div>
                </div>

                <h3 class="text-2xl font-bold font-lora mb-6 text-[#5D4037]">Produtos Atuais</h3>
                <div id="admin-product-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Produtos serão listados aqui -->
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-[#5D4037] text-white py-12">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center mb-4">
                        <img src="imagens/LOGO 2023.jpg" alt="Logo Granja Recanto Feliz" class="h-16 w-auto mr-3 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold font-lora">Granja Recanto Feliz</h3>
                    </div>
                    <p class="mb-4">Produtos frescos e de qualidade direto da nossa granja para sua mesa.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-white hover:text-[#FDD835] transition duration-300">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-white hover:text-[#FDD835] transition duration-300">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="text-white hover:text-[#FDD835] transition duration-300">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold font-lora mb-4">Links Rápidos</h3>
                    <ul class="space-y-2">
                        <li><a href="#inicio" class="hover:text-[#FDD835] transition duration-300">Início</a></li>
                        <li><a href="#produtos" class="hover:text-[#FDD835] transition duration-300">Produtos</a></li>
                        <li><a href="#sobre" class="hover:text-[#FDD835] transition duration-300">Sobre Nós</a></li>
                        <li><a href="#contato" class="hover:text-[#FDD835] transition duration-300">Contato</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold font-lora mb-4">Produtos</h3>
                    <ul class="space-y-2">
                        <li><a href="#produtos" class="hover:text-[#FDD835] transition duration-300">Fertilizantes</a></li>
                        <li><a href="#produtos" class="hover:text-[#FDD835] transition duration-300">Aves</a></li>
                        <li><a href="#produtos" class="hover:text-[#FDD835] transition duration-300">Ovos</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold font-lora mb-4">Contato</h3>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fas fa-map-marker-alt mt-1 mr-2 text-[#FDD835]"></i>
                            <span>Granja Recanto Feliz, Jardim Botânico, Brasília - DF</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone-alt mr-2 text-[#FDD835]"></i>
                            <span>(38) 99924-7376</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-envelope mr-2 text-[#FDD835]"></i>
                            <span>comercial@granjarecantofeliz.com</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-[#8B4513] mt-8 pt-8 text-center">
                <p>&copy; 2023 Granja Recanto Feliz. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Modal de Bem-estar Animal -->
    <div id="sustainability-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="p-6 border-b flex justify-between items-center">
                <h3 class="text-3xl font-bold font-lora text-[#5D4037] flex items-center">
                    <i class="fas fa-leaf text-green-600 mr-3"></i>
                    Bem-estar Animal & Produção Sustentável
                </h3>
                <button onclick="closeSustainabilityModal()" class="text-3xl text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto flex-grow">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div>
                        <div class="bg-green-50 p-6 rounded-lg border-l-4 border-green-500 mb-6">
                            <h4 class="text-2xl font-bold text-green-700 mb-4 font-lora flex items-center">
                                <i class="fas fa-heart text-red-500 mr-2"></i>
                                O que é Cage Free?
                            </h4>
                            <p class="text-gray-700 leading-relaxed mb-4">
                                <strong>Cage free</strong> é uma expressão em inglês que se refere à criação de galinhas soltas, sem gaiolas. A prioridade, aqui, é o bem-estar dos animais e a qualidade do produto entregue ao consumidor.
                            </p>
                            <p class="text-gray-700 leading-relaxed">
                                Nesse sistema, as aves têm um tratamento diferenciado, o que as afasta do estresse, trazendo mais conforto e bem-estar. Isso corrobora para que as aves se mantenham ainda mais saudáveis.
                            </p>
                        </div>
                        
                        <div class="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-500">
                            <h4 class="text-xl font-bold text-blue-700 mb-3 font-lora flex items-center">
                                <i class="fas fa-dove text-blue-500 mr-2"></i>
                                Movimento Crescente
                            </h4>
                            <p class="text-gray-700 leading-relaxed text-sm">
                                Nos últimos anos, o movimento ganhou o apoio de inúmeras marcas que se comprometeram, até 2025, a consumir apenas alimentos vindos de produções que valorizem o bem-estar animal. Cada vez mais consumidores têm se juntado à ideia, mais conscientes quanto às suas escolhas de alimentação.
                            </p>
                        </div>
                    </div>
                    
                    <div>
                        <div class="bg-yellow-50 p-6 rounded-lg border-l-4 border-yellow-500 mb-6">
                            <h4 class="text-2xl font-bold text-yellow-700 mb-4 font-lora flex items-center">
                                <i class="fas fa-feather-alt text-yellow-600 mr-2"></i>
                                Bem-estar para Galinhas Livres
                            </h4>
                            <p class="text-gray-700 leading-relaxed mb-4">
                                Com tanto espaço para se movimentar, as galinhas conseguem viver de modo mais natural. Ao mesmo tempo em que ficam protegidas do clima e de outras adversidades, elas podem manter seu comportamento habitual.
                            </p>
                            
                            <div class="space-y-3">
                                <div class="flex items-center text-gray-700">
                                    <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                    <span>Abrir suas asas e se espreguiçar</span>
                                </div>
                                <div class="flex items-center text-gray-700">
                                    <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                    <span>Ciscar o chão naturalmente</span>
                                </div>
                                <div class="flex items-center text-gray-700">
                                    <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                    <span>Pular e dar pequenos voos</span>
                                </div>
                                <div class="flex items-center text-gray-700">
                                    <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                    <span>Menor exposição ao estresse</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-[#F5EFE6] p-6 rounded-lg border-l-4 border-[#8B4513]">
                            <h4 class="text-xl font-bold text-[#8B4513] mb-3 font-lora flex items-center">
                                <i class="fas fa-award text-[#8B4513] mr-2"></i>
                                Nosso Compromisso
                            </h4>
                            <p class="text-gray-700 leading-relaxed text-sm italic">
                                "Na Granja Recanto Feliz, acreditamos que animais felizes produzem alimentos mais saudáveis e saborosos. Por isso, garantimos que nossas aves vivam em liberdade, com todo o cuidado e carinho que merecem."
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 text-center">
                    <div class="bg-gradient-to-r from-green-500 to-blue-500 text-white p-6 rounded-lg">
                        <h4 class="text-2xl font-bold mb-2 font-lora">Qualidade que Você Pode Confiar</h4>
                        <p class="text-lg">Produtos frescos, naturais e produzidos com respeito ao bem-estar animal</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal dos 5 Motivos para Comer Ovos -->
    <div id="eggs-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col">
            <div class="p-6 border-b flex justify-between items-center">
                <h3 class="text-3xl font-bold font-lora text-[#5D4037] flex items-center">
                    <i class="fas fa-egg text-yellow-500 mr-3"></i>
                    5 Motivos para Comer Ovos Recanto Feliz
                </h3>
                <button onclick="closeEggsModal()" class="text-3xl text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto flex-grow">
                <p class="text-lg text-gray-700 mb-8 text-center font-semibold">
                    5 motivos para você incluir ovos na sua rotina alimentar.
                </p>
                
                <div class="space-y-6">
                    <!-- Motivo 1 -->
                    <div class="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-500">
                        <h4 class="text-xl font-bold text-blue-700 mb-3 font-lora flex items-center">
                            <span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">1</span>
                            Ovos Caipira Recanto Feliz são fontes de proteína
                        </h4>
                        <p class="text-gray-700 leading-relaxed">
                            Um ovo fornece, em média, seis gramas de proteína de alta qualidade - o que significa que ele tem todos os aminoácidos que você precisa obter, da mesma forma que a carne. A proteína também é considerada a mais "saciante" (satisfatória) de todos os nutrientes. E lembre-se que cerca de metade da proteína está na gema, não apenas na clara.
                        </p>
                    </div>
                    
                    <!-- Motivo 2 -->
                    <div class="bg-green-50 p-6 rounded-lg border-l-4 border-green-500">
                        <h4 class="text-xl font-bold text-green-700 mb-3 font-lora flex items-center">
                            <span class="bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">2</span>
                            Ovos Caipira Recanto Feliz restringem sua fome
                        </h4>
                        <p class="text-gray-700 leading-relaxed">
                            Incluir ovos em seu café da manhã atrasa a fome por mais tempo do que as refeições à base de grãos. Isso faz com que sua rotina de alimentação seja mais adequada, evitando comer algo sem necessidade antes do horário de almoço.
                        </p>
                    </div>
                    
                    <!-- Motivo 3 -->
                    <div class="bg-yellow-50 p-6 rounded-lg border-l-4 border-yellow-500">
                        <h4 class="text-xl font-bold text-yellow-700 mb-3 font-lora flex items-center">
                            <span class="bg-yellow-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">3</span>
                            Ovos Caipira Recanto Feliz protegem seus olhos
                        </h4>
                        <p class="text-gray-700 leading-relaxed">
                            Os ovos são ricos em luteína, um pigmento amarelo que se concentra na retina do olho. A luteína ajuda a proteger os olhos da degeneração macular, a principal causa da perda de visão. Ele também protege contra danos causados por smartphones, tablets e computadores. A luteína do ovo é encontrada na gema.
                        </p>
                    </div>
                    
                    <!-- Motivo 4 -->
                    <div class="bg-purple-50 p-6 rounded-lg border-l-4 border-purple-500">
                        <h4 class="text-xl font-bold text-purple-700 mb-3 font-lora flex items-center">
                            <span class="bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">4</span>
                            Ovos Caipira Recanto Feliz não são os vilões que entopem as artérias
                        </h4>
                        <p class="text-gray-700 leading-relaxed">
                            Durante décadas, os ovos foram considerados inimigos da saúde, sendo considerados culpados por aumento do colesterol e do risco de doenças cardíacas. Diversos estudos e testes comprovaram que os ovos não são nocivos à saúde se consumidos de maneira adequada e na quantidade correta.
                        </p>
                    </div>
                    
                    <!-- Motivo 5 -->
                    <div class="bg-red-50 p-6 rounded-lg border-l-4 border-red-500">
                        <h4 class="text-xl font-bold text-red-700 mb-3 font-lora flex items-center">
                            <span class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">5</span>
                            Ovos Caipira Recanto Feliz ajudam a manter a massa muscular
                        </h4>
                        <p class="text-gray-700 leading-relaxed">
                            Começamos a perder massa muscular por volta dos 30 anos, em até 5% por década. A perda muscular pode fazer com que você se sinta fraco, reduza sua resistência e, eventualmente, aumente o risco de quedas debilitantes quando estiver mais velho. O exercício, particularmente o treinamento de força, ajudará a preservar parte deste músculo, mas obter proteína suficiente também é essencial. Os ovos contêm proteína de alta qualidade que repara os músculos após o exercício e ajuda a reconstruí-los.
                        </p>
                    </div>
                </div>
                
                <div class="mt-8 text-center">
                    <div class="bg-gradient-to-r from-yellow-500 to-orange-500 text-white p-6 rounded-lg">
                        <h4 class="text-2xl font-bold mb-2 font-lora">Ovos Caipira Recanto Feliz</h4>
                        <p class="text-lg mb-2">Qualidade, sabor e nutrição em cada ovo</p>
                        <p class="text-sm opacity-90">Fonte: webmd.com</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Entrega Rápida -->
    <div id="delivery-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col">
            <div class="p-6 border-b flex justify-between items-center">
                <h3 class="text-3xl font-bold font-lora text-[#5D4037] flex items-center">
                    <i class="fas fa-truck text-blue-500 mr-3"></i>
                    Entrega Rápida
                </h3>
                <button onclick="closeDeliveryModal()" class="text-3xl text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto flex-grow">
                <div class="space-y-6">
                    <div class="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-500">
                        <h4 class="text-2xl font-bold text-blue-700 mb-4 font-lora flex items-center">
                            <i class="fas fa-clock text-blue-500 mr-3"></i>
                            Prazo de Entrega
                        </h4>
                        <p class="text-gray-700 leading-relaxed text-lg">
                            Entregamos em <strong>até 24h</strong> após o pedido para a região do Jardim Botânico, Lago Sul e Asa Sul.
                        </p>
                    </div>
                    
                    <div class="bg-green-50 p-6 rounded-lg border-l-4 border-green-500">
                        <h4 class="text-2xl font-bold text-green-700 mb-4 font-lora flex items-center">
                            <i class="fas fa-map-marker-alt text-green-500 mr-3"></i>
                            Áreas de Entrega
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="flex items-center text-gray-700">
                                <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                <span class="font-semibold">Jardim Botânico</span>
                            </div>
                            <div class="flex items-center text-gray-700">
                                <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                <span class="font-semibold">Lago Sul</span>
                            </div>
                            <div class="flex items-center text-gray-700">
                                <i class="fas fa-check-circle text-green-500 mr-3"></i>
                                <span class="font-semibold">Asa Sul</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 p-6 rounded-lg border-l-4 border-yellow-500">
                        <h4 class="text-2xl font-bold text-yellow-700 mb-4 font-lora flex items-center">
                            <i class="fas fa-motorcycle text-yellow-600 mr-3"></i>
                            Serviço de Motoboy
                        </h4>
                        <p class="text-gray-700 leading-relaxed mb-3">
                            Para garantir que seus produtos cheguem frescos e no prazo, utilizamos serviço de motoboy especializado.
                        </p>
                        <div class="bg-yellow-100 p-4 rounded-lg">
                            <p class="text-yellow-800 font-semibold flex items-center">
                                <i class="fas fa-info-circle mr-2"></i>
                                Pode ser cobrada taxa de entrega para utilizar o serviço de motoboy
                            </p>
                        </div>
                    </div>
                    
                    <div class="bg-[#F5EFE6] p-6 rounded-lg border-l-4 border-[#8B4513]">
                        <h4 class="text-2xl font-bold text-[#8B4513] mb-4 font-lora flex items-center">
                            <i class="fas fa-shield-alt text-[#8B4513] mr-3"></i>
                            Garantia de Frescor
                        </h4>
                        <p class="text-gray-700 leading-relaxed">
                            Nossos produtos são embalados com cuidado e entregues rapidamente para manter toda a qualidade e frescor que você espera da Granja Recanto Feliz.
                        </p>
                    </div>
                </div>
                
                <div class="mt-8 text-center">
                    <div class="bg-gradient-to-r from-blue-500 to-green-500 text-white p-6 rounded-lg">
                        <h4 class="text-2xl font-bold mb-2 font-lora">Produtos Frescos na Sua Mesa</h4>
                        <p class="text-lg">Rapidez, qualidade e conveniência em cada entrega</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Botão flutuante do WhatsApp -->
    <a href="https://wa.me/553899247376" target="_blank" class="fixed bottom-6 right-6 bg-[#25D366] text-white p-4 rounded-full shadow-lg hover:bg-green-600 transition duration-300 z-40 flex items-center justify-center w-16 h-16">
        <i class="fab fa-whatsapp text-2xl"></i>
    </a>

    <!-- Modal de Detalhes do Produto -->
    <div id="product-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="p-4 border-b flex justify-between items-center">
                <h3 id="modal-product-title" class="text-2xl font-bold font-lora text-[#5D4037]">Detalhes do Produto</h3>
                <button id="close-modal-btn" 
                        class="text-3xl text-gray-500 hover:text-gray-800 cursor-pointer z-10 p-2 hover:bg-gray-100 rounded-full transition-all duration-200" 
                        style="pointer-events: auto;"
                        onclick="console.log('🔲 Onclick disparado'); document.getElementById('product-modal').classList.add('hidden'); document.getElementById('product-modal').style.display='none';">&times;</button>
            </div>
            <div id="modal-content-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6 p-6 overflow-y-auto">
                <!-- Conteúdo do modal (galeria e detalhes) será injetado aqui pelo JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal do Carrinho -->
    <div id="cart-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col">
            <div class="p-6 border-b flex justify-between items-center">
                <h3 class="text-2xl font-bold font-lora text-[#5D4037]">Seu Carrinho</h3>
                <button onclick="document.getElementById('cart-modal').classList.add('hidden'); document.getElementById('cart-modal').style.display='none';" class="text-2xl text-gray-500 hover:text-gray-800 cursor-pointer">&times;</button>
            </div>
            <div id="cart-items" class="p-6 overflow-y-auto flex-grow">
                <p class="text-gray-500">Seu carrinho está vazio.</p>
            </div>
            <div class="p-6 border-t bg-gray-50">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-lg font-semibold">Subtotal:</span>
                    <span id="cart-subtotal" class="text-lg">R$ 0,00</span>
                </div>
                <div class="flex justify-between items-center mb-4">
                    <span class="text-lg font-semibold">Entrega:</span>
                    <span id="delivery-fee" class="text-lg">A calcular</span>
                </div>
                <div class="flex justify-between items-center mb-6 border-t pt-4">
                    <span class="text-xl font-bold">Total:</span>
                    <span id="cart-total" class="text-xl font-bold text-[#5D4037]">R$ 0,00</span>
                </div>
                <div id="checkout-section">
                     <h4 class="text-lg font-semibold mb-2">Verificar Entrega</h4>
                     <input type="text" id="cep-frete" maxlength="9" placeholder="Digite seu CEP" class="w-full p-3 border rounded mb-2 focus:outline-none focus:ring-2 focus:ring-[#8B4513]">
                     <button onclick="verificarFrete()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 mb-3">
                        <i class="fas fa-search mr-2"></i> Verificar Frete
                     </button>
                     <div id="frete-resultado" class="mb-3" style="display: none;"></div>
                     <button id="btn-finalizar" onclick="finalizarViaWhatsApp()" disabled class="w-full bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition duration-300 flex items-center justify-center cursor-not-allowed">
                        <i class="fab fa-whatsapp mr-2"></i> Enviar Pedido via WhatsApp
                     </button>
                     <p class="text-xs text-gray-500 mt-2 text-center">
                        <i class="fas fa-info-circle mr-1"></i> 
                        Você precisará informar seus dados pessoais antes de enviar o pedido
                     </p>
                </div>
            </div>
        </div>
    </div>

    <!-- SQL.js desativado: usar produtos.json como fonte canônica -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script> -->
    <script src="js/data-manager.js"></script>
    <script src="js/scripts.js"></script>
    <script src="js/fix-produtos-minimo.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Aguardar DataManager estar completamente carregado
        let products = [];
        
        // Função para carregar produtos com retry
        async function carregarProdutos(tentativa = 1) {
            console.log(`🔍 Tentativa ${tentativa}: Verificando DataManager...`);
            
            if (!window.dataManager) {
                console.log('⚠️ DataManager não encontrado, criando...');
                window.dataManager = new DataManager();
            }
            
            try {
                // Carregar produtos de forma assíncrona
                products = await window.dataManager.getActiveProducts();
                console.log('📦 Produtos carregados:', products.length);
                
                if (products.length > 0) {
                    renderProducts('all');
                    console.log('✅ Produtos renderizados com sucesso');
                } else if (tentativa < 5) {
                    console.log(`⚠️ Nenhum produto encontrado, tentativa ${tentativa}/5`);
                    // Tentar novamente após um delay maior
                    setTimeout(() => carregarProdutos(tentativa + 1), 1000);
                } else {
                    console.log('❌ Falha ao carregar produtos após 5 tentativas');
                    // Tentar restaurar produtos padrão
                    if (window.dataManager.restoreDefaultProducts) {
                        console.log('🔄 Tentando restaurar produtos padrão...');
                        const restored = window.dataManager.restoreDefaultProducts();
                        if (restored && restored.products) {
                            products = restored.products.filter(p => p.active !== false);
                            renderProducts('all');
                            console.log('✅ Produtos padrão restaurados e renderizados');
                        } else {
                            productGrid.innerHTML = '<p class="col-span-4 text-center text-gray-500">Erro ao carregar produtos. <a href="diagnostico-produtos.html" class="text-blue-500 underline">Clique aqui para diagnóstico</a></p>';
                        }
                    } else {
                        productGrid.innerHTML = '<p class="col-span-4 text-center text-gray-500">Erro ao carregar produtos. <a href="diagnostico-produtos.html" class="text-blue-500 underline">Clique aqui para diagnóstico</a></p>';
                    }
                }
            } catch (error) {
                console.error('❌ Erro ao carregar produtos:', error);
                if (tentativa < 5) {
                    setTimeout(() => carregarProdutos(tentativa + 1), 1000);
                } else {
                    productGrid.innerHTML = '<p class="col-span-4 text-center text-gray-500">Erro ao carregar produtos. <a href="diagnostico-produtos.html" class="text-blue-500 underline">Clique aqui para diagnóstico</a></p>';
                }
            }
        }
        
        // Script mínimo já carrega os produtos

        // Função para descobrir automaticamente todas as imagens de um produto
        async function discoverProductImages(productId) {
            const gallery = [];
            const extensions = ['png', 'jpeg', 'jpg']; // PNG primeiro pois é mais comum
            
            console.log(`🔍 Procurando imagens para produto ${productId}...`);
            
            for (let i = 1; i <= 10; i++) { // Testa até 10 imagens
                let foundImage = false;
                
                for (const ext of extensions) {
                    const imagePath = `imagens/produtos/${productId}/${i}.${ext}`;
                    
                    try {
                        // Tenta carregar a imagem para verificar se existe
                        await new Promise((resolve, reject) => {
                            const img = new Image();
                            img.onload = () => {
                                gallery.push(imagePath);
                                foundImage = true;
                                console.log(`✅ Encontrou: ${imagePath}`);
                                resolve();
                            };
                            img.onerror = () => {
                                console.log(`❌ Não encontrou: ${imagePath}`);
                                reject();
                            };
                            img.src = imagePath;
                        });
                        break; // Se encontrou, para de testar outras extensões para este número
                    } catch (error) {
                        // Imagem não existe, continua testando
                        continue;
                    }
                }
                
                if (!foundImage) {
                    console.log(`🔍 Parou de procurar no número ${i} - nenhuma imagem encontrada`);
                    break; // Se não encontrou nenhuma imagem com este número, para
                }
            }
            
            console.log(`📋 Total de imagens encontradas para produto ${productId}:`, gallery.length);
            console.log(`📂 Imagens: `, gallery);
            
            return gallery.length > 0 ? gallery : [products.find(p => p.id === productId)?.image];
        }

        const productGrid = document.getElementById('product-grid');
        const filterButtons = document.querySelectorAll('.filter-btn');
        
        const productModal = document.getElementById('product-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        
        // Debug: verificar se elementos foram encontrados
        console.log('🔍 Debug elementos:');
        console.log('- productGrid:', productGrid ? '✅' : '❌');
        console.log('- productModal:', productModal ? '✅' : '❌');
        console.log('- closeModalBtn:', closeModalBtn ? '✅' : '❌');
        
        const cartButton = document.getElementById('cart-button');
        const cartModal = document.getElementById('cart-modal');
        const closeCartBtn = document.getElementById('close-cart-btn');

        function renderProducts(filter) {
            productGrid.innerHTML = '';
            let filtered;
            
            if (filter === 'all') {
                filtered = products;
            } else if (filter === 'granja') {
                filtered = products.filter(p => p.category !== 'parceiros');
            } else {
                filtered = products.filter(p => p.category === filter);
            }
            
            if (filtered.length === 0) {
                productGrid.innerHTML = '<p class="col-span-4 text-center text-gray-500">Nenhum produto encontrado.</p>';
                return;
            }

            filtered.forEach(product => {
                const partnerBadge = product.partner ? `
                    <div class="absolute top-2 right-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full flex items-center">
                        <i class="fas fa-handshake mr-1"></i> Parceiro
                    </div>
                ` : '';
                
                const partnerInfo = product.partner ? `
                    <div class="text-sm text-blue-600 mb-2">
                        <i class="fas fa-user mr-1"></i> ${product.partner.producer}
                    </div>
                ` : '';
                
                productGrid.innerHTML += `
                    <div class="product-card bg-white rounded-lg shadow-lg p-6 flex flex-col items-center text-center transition-all duration-300 hover:shadow-xl relative">
                        ${partnerBadge}
                        <img src="${product.image}" alt="${product.name}" class="w-40 h-40 object-cover rounded-lg mb-4" onerror="this.src='imagens/produtos/default/placeholder.png'">
                        <h3 class="text-xl font-bold mb-2 font-lora">${product.name}</h3>
                        ${partnerInfo}
                        <p class="text-gray-600 mb-4 flex-grow">${product.slogan}</p>
                        <span class="text-xl font-bold text-[#5D4037] mb-4">R$ ${product.price.toFixed(2)}</span>
                        <button class="detail-btn bg-[#8B4513] hover:bg-[#5D4037] text-white font-bold py-2 px-4 rounded-lg transition w-full" data-id="${product.id}">Ver Detalhes</button>
                    </div>
                `;
            });
        }

        async function openProductModal(productId) {
            console.log('🔍 Abrindo modal para produto ID:', productId);
            const product = products.find(p => p.id === productId);
            if (!product) {
                console.error('❌ Produto não encontrado:', productId);
                return;
            }

            console.log('✅ Produto encontrado:', product.name);

            // Usar galeria do produto ou a imagem principal
            let gallery = [];
            if (product.gallery && product.gallery.length > 0) {
                gallery = product.gallery;
            } else {
                // Tentar descobrir imagens automaticamente, mas com fallback seguro
                try {
                    gallery = await discoverProductImages(productId);
                } catch (error) {
                    console.warn('⚠️ Erro ao descobrir imagens:', error);
                    gallery = [product.image];
                }
            }
            
            if (!gallery || gallery.length === 0) {
                gallery = [product.image];
            }

            const modalContent = productModal.querySelector('#modal-content-grid');
            
            if (!modalContent) {
                console.error('❌ Modal content não encontrado');
                return;
            }
            
            // Criar carrossel de imagens
            modalContent.innerHTML = `
                <div class="p-6 relative">
                    <div id="carousel-container" class="relative overflow-hidden rounded-lg">
                        <div id="carousel-track" class="flex transition-transform duration-300 ease-in-out">
                            ${gallery.map((imgSrc, index) => `
                                <div class="w-full flex-shrink-0">
                                    <img src="${imgSrc}" alt="${product.name} - ${index + 1}" class="w-full h-80 object-cover">
                                </div>
                            `).join('')}
                        </div>
                        ${gallery.length > 1 ? `
                            <button id="prev-btn" class="absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button id="next-btn" class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                            <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
                                ${gallery.map((_, index) => `
                                    <div class="carousel-dot w-2 h-2 rounded-full bg-white/50 cursor-pointer hover:bg-white transition" data-index="${index}"></div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                </div>
                <div class="p-6 flex flex-col">
                    <h3 class="text-3xl font-bold mb-4 font-lora text-[#5D4037]">${product.name}</h3>
                    ${product.partner ? `
                        <div class="bg-blue-50 p-4 rounded-lg mb-4 border-l-4 border-blue-500">
                            <h4 class="font-bold text-blue-700 mb-2 flex items-center">
                                <i class="fas fa-handshake mr-2"></i> Produzido por Parceiro
                            </h4>
                            <div class="text-sm text-blue-600">
                                <p><strong>Produtor:</strong> ${product.partner.producer}</p>
                                <p><strong>Local:</strong> ${product.partner.location}</p>
                                <p><strong>Sobre:</strong> ${product.partner.description}</p>
                            </div>
                        </div>
                    ` : ''}
                    <p class="text-gray-600 mb-6 leading-relaxed flex-grow">${product.description || product.slogan || 'Produto de qualidade da Granja Recanto Feliz.'}</p>
                    <span class="text-2xl font-bold text-[#5D4037] mb-6 block">R$ ${product.price.toFixed(2)}</span>
                    <div class="mb-4">
                        <label class="block text-sm font-bold mb-2">Quantidade:</label>
                        <div class="flex items-center space-x-3">
                            <button id="qty-minus" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-3 rounded">
                                <i class="fas fa-minus"></i>
                            </button>
                            <input id="product-quantity" type="number" value="1" min="1" class="w-20 text-center border rounded py-2">
                            <button id="qty-plus" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-3 rounded">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    <button id="add-to-cart-modal" class="w-full bg-[#4CAF50] hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 flex items-center justify-center">
                        <i class="fas fa-cart-plus mr-2"></i> Adicionar ao Carrinho
                    </button>
                </div>
            `;
            
            // Implementar lógica do carrossel
            let currentIndex = 0;
            const track = modalContent.querySelector('#carousel-track');
            const dots = modalContent.querySelectorAll('.carousel-dot');
            const prevBtn = modalContent.querySelector('#prev-btn');
            const nextBtn = modalContent.querySelector('#next-btn');
            
            function updateCarousel() {
                track.style.transform = `translateX(-${currentIndex * 100}%)`;
                dots.forEach((dot, index) => {
                    dot.classList.toggle('bg-white', index === currentIndex);
                    dot.classList.toggle('bg-white/50', index !== currentIndex);
                });
            }
            
            if (prevBtn) {
                prevBtn.addEventListener('click', () => {
                    currentIndex = currentIndex === 0 ? gallery.length - 1 : currentIndex - 1;
                    updateCarousel();
                });
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    currentIndex = currentIndex === gallery.length - 1 ? 0 : currentIndex + 1;
                    updateCarousel();
                });
            }
            
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    currentIndex = index;
                    updateCarousel();
                });
            });
            
            updateCarousel();
            productModal.classList.remove('hidden');
            productModal.style.display = 'flex';
            
            // Atualizar título do modal
            const modalTitle = productModal.querySelector('#modal-product-title');
            if (modalTitle) {
                modalTitle.textContent = product.name;
            }
            
            console.log('✅ Modal aberto com sucesso para:', product.name);
        }

        // --- Event Listeners ---

        // Filter buttons
        filterButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                const filter = this.getAttribute('data-filter');
                
                // Se for "granja", mostrar subcategorias
                if (filter === 'granja') {
                    showGranjaCategories();
                    return;
                }
                
                filterButtons.forEach(b => {
                    b.classList.remove('active', 'bg-[#8B4513]', 'text-white');
                    b.classList.add('bg-white', 'text-[#8B4513]');
                });
                this.classList.add('active', 'bg-[#8B4513]', 'text-white');
                this.classList.remove('bg-white', 'text-[#8B4513]');
                renderProducts(filter);
            });
        });

        // "Ver Detalhes" buttons (event delegation on productGrid)
        productGrid.addEventListener('click', function(e) {
            console.log('🖱️ Clique detectado:', e.target);
            console.log('🏷️ Classes do elemento:', e.target.classList);
            
            if (e.target && e.target.classList.contains('detail-btn')) {
                const id = parseInt(e.target.getAttribute('data-id'));
                console.log('🎯 Botão de detalhes clicado, ID:', id);
                openProductModal(id);
            } else {
                console.log('⚠️ Clique não foi em um botão de detalhes');
            }
        });
        
        // Gallery thumbnails in modal (event delegation on productModal)
        productModal.addEventListener('click', function(e) {
            if (e.target && e.target.parentElement && e.target.parentElement.id === 'modal-gallery') {
                const mainImage = productModal.querySelector('#modal-main-image img');
                if(mainImage) mainImage.src = e.target.src;
            }
        });

        // Close product modal
        if (closeModalBtn) {
            closeModalBtn.addEventListener('click', () => {
                console.log('🔲 Botão de fechar clicado (método tradicional)');
                productModal.classList.add('hidden');
                productModal.style.display = 'none';
            });
        } else {
            console.warn('⚠️ closeModalBtn não encontrado');
        }
        
        // Adicionar também delegação de eventos para o botão de fechar (backup)
        productModal.addEventListener('click', function(e) {
            if (e.target && e.target.id === 'close-modal-btn') {
                console.log('🔲 Botão de fechar clicado (delegação de eventos)');
                productModal.classList.add('hidden');
                productModal.style.display = 'none';
            }
        });
        
        // Event listener global para botão de fechar (backup adicional)
        document.addEventListener('click', function(e) {
            if (e.target && e.target.id === 'close-modal-btn') {
                console.log('🔲 Botão de fechar clicado (listener global)');
                productModal.classList.add('hidden');
                productModal.style.display = 'none';
            }
        });
        
        // Fechar modal clicando fora
        productModal.addEventListener('click', (e) => {
            if (e.target === productModal) {
                productModal.classList.add('hidden');
                productModal.style.display = 'none';
            }
        });
        
        // Fechar modal com ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !productModal.classList.contains('hidden')) {
                productModal.classList.add('hidden');
                productModal.style.display = 'none';
            }
        });

        // Event listeners para modal do produto (usando delegação)
        productModal.addEventListener('click', function(e) {
            // Botões de quantidade
            if (e.target && e.target.id === 'qty-minus') {
                const qtyInput = productModal.querySelector('#product-quantity');
                if (qtyInput && qtyInput.value > 1) {
                    qtyInput.value = parseInt(qtyInput.value) - 1;
                }
            }
            
            if (e.target && e.target.id === 'qty-plus') {
                const qtyInput = productModal.querySelector('#product-quantity');
                if (qtyInput) {
                    qtyInput.value = parseInt(qtyInput.value) + 1;
                }
            }
            
            // Botão "Adicionar ao Carrinho"
            if (e.target && e.target.id === 'add-to-cart-modal') {
                const qtyInput = productModal.querySelector('#product-quantity');
                const quantity = qtyInput ? parseInt(qtyInput.value) : 1;
                
                // Encontrar o produto atual do modal
                const productTitle = productModal.querySelector('#modal-product-title');
                if (productTitle) {
                    const productName = productTitle.textContent;
                    const product = products.find(p => p.name === productName);
                    
                    if (product) {
                        for (let i = 0; i < quantity; i++) {
                            adicionarAoCarrinho(product);
                        }
                        
                        // Fechar modal
                        productModal.classList.add('hidden');
                        productModal.style.display = 'none';
                        
                        console.log(`✅ ${quantity}x ${product.name} adicionado(s) ao carrinho`);
                    }
                }
            }
        });

        // Open/Close Cart Modal
        if (cartButton) {
            cartButton.addEventListener('click', () => {
                updateCartModal();
                cartModal.classList.remove('hidden');
                cartModal.style.display = 'flex';
            });
        }
        if (closeCartBtn) {
            closeCartBtn.addEventListener('click', () => {
                cartModal.classList.add('hidden');
                cartModal.style.display = 'none';
            });
        }
        
        // Fechar carrinho clicando fora
        cartModal.addEventListener('click', (e) => {
            if (e.target === cartModal) {
                cartModal.classList.add('hidden');
                cartModal.style.display = 'none';
            }
        });

        // Escutar mudanças nos produtos vindas da administração
        window.addEventListener('productsUpdated', function(event) {
            console.log('🔄 Produtos atualizados! Recarregando...');
            // Recarregar produtos do DataManager
            if (loadProducts()) {
                console.log('✅ Produtos recarregados com sucesso');
            } else {
                console.log('⚠️ Falhou ao recarregar, recarregando página...');
                window.location.reload();
            }
        });
        
        // Verificar atualizações periodicamente
        setInterval(() => {
            if (window.dataManager) {
                const newProducts = window.dataManager.getActiveProducts();
                if (newProducts.length > 0 && newProducts.length !== products.length) {
                    console.log('🔄 Produtos atualizados, recarregando...');
                    products = newProducts;
                    renderProducts('all');
                }
            }
        }, 3000);

        // Escutar mudanças de layout vindas da administração
        window.addEventListener('message', function(event) {
            if (event.data && event.data.type === 'layoutChanged') {
                console.log('🎨 Layout alterado! Aplicando novo layout...');
                // Usar função do DataManager
                if (window.dataManager) {
                    window.dataManager.applyCurrentLayout();
                }
            }
        });

        // =============== SISTEMA DE LAYOUTS DINÂMICOS ===============

        // Aplicar layout automaticamente na inicialização
        function initializeLayout() {
            try {
                if (window.dataManager) {
                    // Usar a função do DataManager ao invés da local
                    const appliedLayout = window.dataManager.applyCurrentLayout();
                    console.log('🎨 Layout aplicado via DataManager:', appliedLayout.name);
                }
            } catch (error) {
                console.log('⚠️ Erro ao aplicar layout:', error);
            }
        }

        // Aplicar layout específico
        function applyLayout(layout) {
            if (!layout) return;

            try {
                // Aplicar cores CSS customizadas
                if (layout.colors) {
                    const root = document.documentElement;
                    root.style.setProperty('--primary-color', layout.colors.primary);
                    root.style.setProperty('--secondary-color', layout.colors.secondary);
                    root.style.setProperty('--accent-color', layout.colors.accent);
                    root.style.setProperty('--background-color', layout.colors.background);
                }

                // Atualizar texto do banner
                const bannerText = document.querySelector('.banner-text');
                if (bannerText && layout.bannerText) {
                    bannerText.textContent = layout.bannerText;
                }

                // Adicionar classe temática ao body
                document.body.className = document.body.className.replace(/theme-\w+/g, '');
                if (layout.theme && layout.theme !== 'default') {
                    document.body.classList.add(`theme-${layout.theme}`);
                }

                // Atualizar cores em elementos específicos que usam cores hardcoded
                updateDynamicColors(layout.colors);

                console.log('✅ Layout aplicado com sucesso:', layout.name);
            } catch (error) {
                console.error('❌ Erro ao aplicar layout:', error);
            }
        }

        // Atualizar cores em elementos específicos
        function updateDynamicColors(colors) {
            if (!colors) return;

            // Atualizar botões e elementos com cores específicas
            const primaryElements = document.querySelectorAll('.bg-\\[\\#2D5016\\]');
            const secondaryElements = document.querySelectorAll('.bg-\\[\\#8B4513\\]');
            const accentElements = document.querySelectorAll('.bg-\\[\\#228B22\\]');

            // Nota: Para uma implementação completa, seria necessário
            // substituir todas as cores hardcoded por variáveis CSS
            // Este é um exemplo básico de como fazer a atualização
        }

        // Verificar layouts automáticos periodicamente
        function checkAutoLayouts() {
            try {
                if (window.dataManager) {
                    // Usar função do DataManager
                    window.dataManager.applyCurrentLayout();
                }
            } catch (error) {
                console.log('⚠️ Erro ao verificar layouts automáticos');
            }
        }

        // Verificar layouts automáticos a cada hora
        setInterval(checkAutoLayouts, 3600000); // 1 hora em millisegundos

        // Inicializar layout na primeira carga
        initializeLayout();
        
        // Verificar se há carrossel temático para aplicar
        if (window.dataManager) {
            const currentLayout = window.dataManager.getCurrentLayout();
            if (currentLayout && currentLayout.carouselThemes) {
                setTimeout(() => {
                    applyLayoutCarousel(currentLayout.carouselThemes);
                }, 200);
            }
        }

        // Aplicar layout temático atual
        if (window.dataManager) {
            window.dataManager.applyCurrentLayout();
        }
        
        // Inicializar carrossel após um pequeno delay
        setTimeout(() => {
            initCarousel();
        }, 100);
        
        // Sistema de detecção de mudanças de layout
        function reloadLayoutFromChanges() {
            console.log('💫 Layout alterado detectado! Reaplicando...');
            if (window.dataManager) {
                // Recarregar dataManager
                window.dataManager = new DataManager();
                const newLayout = window.dataManager.applyCurrentLayout();
                
                // Aplicar carrossel temático se existir
                if (newLayout && newLayout.carouselThemes) {
                    applyLayoutCarousel(newLayout.carouselThemes);
                } else {
                    // Usar carrossel padrão
                    applyDefaultCarousel();
                }
                
                showNotification('Layout atualizado! 🎨', 'success');
            } else {
                // Se não conseguir reaplicar, recarregar página
                setTimeout(() => window.location.reload(), 1000);
            }
        }
        
        // Aplicar carrossel temático do layout
        function applyLayoutCarousel(layoutThemes) {
            const heroCarousel = document.getElementById('hero-carousel');
            if (!heroCarousel || !layoutThemes.length) return;
            
            console.log('🎠 Aplicando carrossel temático:', layoutThemes.length, 'slides');
            
            // Parar carrossel atual
            clearInterval(carouselInterval);
            
            // Gerar slides dos temas do layout
            heroCarousel.innerHTML = layoutThemes.map((theme, index) => `
                <div class="carousel-slide ${index === 0 ? 'active' : ''} absolute inset-0 bg-cover bg-center transition-all duration-1000 ${index === 0 ? '' : 'opacity-0'}" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('${theme.image}')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">${theme.title}</h1>
                            <p class="text-xl md:text-2xl mb-8">${theme.description}</p>
                            <a href="${theme.buttonLink}" class="text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center" style="background-color: ${theme.buttonColor};">
                                <i class="fas fa-shopping-basket mr-2"></i> ${theme.buttonText}
                            </a>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Atualizar indicadores
            updateCarouselIndicators(layoutThemes.length);
            
            // Reinicializar carrossel
            currentSlide = 0;
            setTimeout(() => {
                initCarousel();
            }, 100);
        }
        
        // Aplicar carrossel padrão
        function applyDefaultCarousel() {
            const heroCarousel = document.getElementById('hero-carousel');
            if (!heroCarousel) return;
            
            console.log('🎠 Aplicando carrossel padrão');
            
            // Parar carrossel atual
            clearInterval(carouselInterval);
            
            // Restaurar slides padrão
            heroCarousel.innerHTML = `
                <!-- Slide 1: Ovos Caipira -->
                <div class="carousel-slide active absolute inset-0 bg-cover bg-center transition-all duration-1000" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/ovos-caipira.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6 animate-fade-in">🥚 Ovos Caipira Autênticos</h1>
                            <p class="text-xl md:text-2xl mb-8 animate-slide-up">Galinhas criadas soltas, alimentação natural, sem hormônios. O sabor puro da natureza em cada ovo.</p>
                            <a href="#produtos" class="bg-[#4CAF50] hover:bg-green-700 text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center animate-bounce-in">
                                <i class="fas fa-shopping-basket mr-2"></i> Ver Ovos Caipira
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 2: Galinhas Caipira -->
                <div class="carousel-slide absolute inset-0 bg-cover bg-center transition-all duration-1000 opacity-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/galinhas-caipira.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">🐓 Galinhas Caipira Felizes</h1>
                            <p class="text-xl md:text-2xl mb-8">Criadas com liberdade e carinho, nossas galinhas vivem soltas no pasto, resultando em carne mais saborosa e saudável.</p>
                            <a href="#produtos" class="bg-[#8B4513] hover:bg-[#5D4037] text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center">
                                <i class="fas fa-drumstick-bite mr-2"></i> Ver Galinhas
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 3: Adubo Orgânico -->
                <div class="carousel-slide absolute inset-0 bg-cover bg-center transition-all duration-1000 opacity-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/adubo-organico.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">🌱 Adubo Orgânico Natural</h1>
                            <p class="text-xl md:text-2xl mb-8">Fertilizantes orgânicos produzidos na própria granja. Nutra sua terra com o que há de melhor na natureza.</p>
                            <a href="#produtos" class="bg-[#228B22] hover:bg-green-700 text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center">
                                <i class="fas fa-seedling mr-2"></i> Ver Fertilizantes
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 4: Agricultura Familiar -->
                <div class="carousel-slide absolute inset-0 bg-cover bg-center transition-all duration-1000 opacity-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imagens/carrocel/agricultura-familiar.png')">
                    <div class="flex items-center justify-center h-full text-white text-center px-6">
                        <div class="max-w-4xl">
                            <h1 class="text-5xl md:text-7xl font-bold font-lora mb-6">🏡 Agricultura Familiar</h1>
                            <p class="text-xl md:text-2xl mb-8">Tradição de gerações, sustentabilidade e amor pela terra. Apoie a agricultura familiar brasileira.</p>
                            <a href="#sobre" class="bg-[#D2691E] hover:bg-orange-700 text-white font-bold py-4 px-8 rounded-full text-lg transition duration-300 inline-flex items-center">
                                <i class="fas fa-heart mr-2"></i> Nossa História
                            </a>
                        </div>
                    </div>
                </div>
            `;
            
            // Atualizar indicadores para 4 slides padrão
            updateCarouselIndicators(4);
            
            // Reinicializar carrossel
            currentSlide = 0;
            setTimeout(() => {
                initCarousel();
            }, 100);
        }
        
        // Atualizar indicadores do carrossel
        function updateCarouselIndicators(count) {
            const indicatorsContainer = document.querySelector('.absolute.bottom-8');
            if (indicatorsContainer) {
                indicatorsContainer.innerHTML = Array.from({length: count}, (_, index) => `
                    <button class="carousel-indicator ${index === 0 ? 'active' : ''} w-3 h-3 ${index === 0 ? 'bg-white' : 'bg-white/50'} rounded-full transition duration-300" data-slide="${index}"></button>
                `).join('');
            }
        }
        
        // 1. Listener para mensagens do admin
        window.addEventListener('message', function(event) {
            if (event.data && event.data.type === 'layoutChanged') {
                console.log('📨 Layout alterado via message:', event.data.layout);
                reloadLayoutFromChanges();
            }
        });
        
        // 2. Listener para BroadcastChannel
        if ('BroadcastChannel' in window) {
            const channel = new BroadcastChannel('layout-changes');
            channel.addEventListener('message', function(event) {
                if (event.data && event.data.type === 'layoutChanged') {
                    console.log('📡 Layout alterado via BroadcastChannel:', event.data.layout);
                    reloadLayoutFromChanges();
                }
            });
        }
        
        // 3. Detectar mudanças no localStorage (múltiplas formas)
        let lastLayoutNotification = localStorage.getItem('layoutChangeNotification');
        let lastDataCheck = localStorage.getItem('granjaRecantoFelizData');
        
        // Verificação mais frequente e robusta
        setInterval(() => {
            // Verificar notificação específica
            const currentNotification = localStorage.getItem('layoutChangeNotification');
            if (currentNotification !== lastLayoutNotification) {
                console.log('💾 Layout alterado via localStorage notification');
                lastLayoutNotification = currentNotification;
                reloadLayoutFromChanges();
                return; // Evitar dupla execução
            }
            
            // Verificar mudanças diretas nos dados
            const currentData = localStorage.getItem('granjaRecantoFelizData');
            if (currentData !== lastDataCheck) {
                console.log('💾 Dados alterados no localStorage, verificando layout...');
                lastDataCheck = currentData;
                
                // Verificar se mudou o layout especificamente
                try {
                    const parsedData = JSON.parse(currentData || '{}');
                    if (parsedData.currentLayout || parsedData.layouts) {
                        console.log('🎯 Layout detectado nos dados alterados');
                        reloadLayoutFromChanges();
                    }
                } catch (e) {
                    console.log('Erro ao verificar dados:', e);
                }
            }
        }, 500); // Verificar a cada 0.5 segundos para ser mais responsivo
        
        // Função para mostrar notificações (se não existir)
        function showNotification(message, type = 'info') {
            console.log(`[${type.toUpperCase()}] ${message}`);
            
            // Criar elemento de notificação visual
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg text-white ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                'bg-blue-500'
            }`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'times' : 'info'} mr-2"></i>
                    ${message}
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    });
    
    // Funções para o modal de sustentabilidade
    function openSustainabilityModal() {
        const modal = document.getElementById('sustainability-modal');
        modal.classList.remove('hidden');
        modal.style.display = 'flex';
    }
    
    function closeSustainabilityModal() {
        const modal = document.getElementById('sustainability-modal');
        modal.classList.add('hidden');
        modal.style.display = 'none';
    }
    
    // Fechar modal ao clicar fora dele
    document.getElementById('sustainability-modal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeSustainabilityModal();
        }
    });
    
    // Funções para o modal dos ovos
    function openEggsModal() {
        const modal = document.getElementById('eggs-modal');
        modal.classList.remove('hidden');
        modal.style.display = 'flex';
    }
    
    function closeEggsModal() {
        const modal = document.getElementById('eggs-modal');
        modal.classList.add('hidden');
        modal.style.display = 'none';
    }
    
    // Fechar modal dos ovos ao clicar fora dele
    document.getElementById('eggs-modal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeEggsModal();
        }
    });
    
    // Funções para o modal de entrega
    function openDeliveryModal() {
        const modal = document.getElementById('delivery-modal');
        modal.classList.remove('hidden');
        modal.style.display = 'flex';
    }
    
    function closeDeliveryModal() {
        const modal = document.getElementById('delivery-modal');
        modal.classList.add('hidden');
        modal.style.display = 'none';
    }
    
    // Fechar modal de entrega ao clicar fora dele
    document.getElementById('delivery-modal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeDeliveryModal();
        }
    });
    
    // Sistema de Carrossel Moderno
    let currentSlide = 0;
    let carouselInterval;
    
    function initCarousel() {
        const slides = document.querySelectorAll('.carousel-slide');
        const indicators = document.querySelectorAll('.carousel-indicator');
        const prevBtn = document.getElementById('prev-slide');
        const nextBtn = document.getElementById('next-slide');
        
        if (!slides.length) {
            console.log('❌ Nenhum slide encontrado');
            return;
        }
        
        console.log(`🎠 Inicializando carrossel com ${slides.length} slides`);
        
        // Garantir que o primeiro slide está ativo
        updateCarousel();
        
        // Auto-play do carrossel (5 segundos)
        carouselInterval = setInterval(() => {
            nextSlide();
        }, 5000);
        
        // Controles manuais
        if (nextBtn) {
            nextBtn.addEventListener('click', (e) => {
                e.preventDefault();
                clearInterval(carouselInterval);
                nextSlide();
                restartAutoPlay();
            });
        }
        
        if (prevBtn) {
            prevBtn.addEventListener('click', (e) => {
                e.preventDefault();
                clearInterval(carouselInterval);
                prevSlide();
                restartAutoPlay();
            });
        }
        
        // Indicadores
        indicators.forEach((indicator, index) => {
            indicator.addEventListener('click', (e) => {
                e.preventDefault();
                clearInterval(carouselInterval);
                goToSlide(index);
                restartAutoPlay();
            });
        });
        
        // Pausar no hover
        const carousel = document.getElementById('hero-carousel');
        if (carousel) {
            carousel.addEventListener('mouseenter', () => {
                clearInterval(carouselInterval);
            });
            
            carousel.addEventListener('mouseleave', () => {
                restartAutoPlay();
            });
        }
        
        console.log('✅ Carrossel inicializado com sucesso');
    }
    
    function nextSlide() {
        const slides = document.querySelectorAll('.carousel-slide');
        currentSlide = (currentSlide + 1) % slides.length;
        console.log(`➡️ Próximo slide: ${currentSlide}`);
        updateCarousel();
    }
    
    function prevSlide() {
        const slides = document.querySelectorAll('.carousel-slide');
        currentSlide = currentSlide === 0 ? slides.length - 1 : currentSlide - 1;
        console.log(`⬅️ Slide anterior: ${currentSlide}`);
        updateCarousel();
    }
    
    function goToSlide(index) {
        currentSlide = index;
        console.log(`🎯 Indo para slide: ${currentSlide}`);
        updateCarousel();
    }
    
    function updateCarousel() {
        const slides = document.querySelectorAll('.carousel-slide');
        const indicators = document.querySelectorAll('.carousel-indicator');
        
        console.log(`🔄 Atualizando carrossel - slide ativo: ${currentSlide}`);
        
        slides.forEach((slide, index) => {
            if (index === currentSlide) {
                slide.classList.add('active');
                slide.style.opacity = '1';
                slide.style.zIndex = '2';
            } else {
                slide.classList.remove('active');
                slide.style.opacity = '0';
                slide.style.zIndex = '1';
            }
        });
        
        indicators.forEach((indicator, index) => {
            if (index === currentSlide) {
                indicator.classList.add('active');
                indicator.style.backgroundColor = 'white';
                indicator.style.transform = 'scale(1.2)';
            } else {
                indicator.classList.remove('active');
                indicator.style.backgroundColor = 'rgba(255, 255, 255, 0.5)';
                indicator.style.transform = 'scale(1)';
            }
        });
    }
    
    function restartAutoPlay() {
        clearInterval(carouselInterval);
        carouselInterval = setInterval(() => {
            nextSlide();
        }, 5000);
    }
    
    // Função global para abrir carrinho
    function openCartModal() {
        console.log('🛒 Abrindo carrinho...');
        
        // Debug: verificar localStorage
        const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
        console.log('📦 Carrinho atual:', carrinho);
        
        updateCartModal();
        const cartModal = document.getElementById('cart-modal');
        if (cartModal) {
            cartModal.classList.remove('hidden');
            cartModal.style.display = 'flex';
        } else {
            console.error('❌ Modal do carrinho não encontrado');
        }
    }
    
    // Tornar função global
    window.openCartModal = openCartModal;
    
    // Definir funções antes dos event listeners
    function filterProducts(category) {
        console.log('🔍 FilterProducts chamado com categoria:', category);
        
        // Verificar se produtos já foram carregados
        if (!window.produtosCarregados) {
            console.warn('⚠️ Produtos ainda não carregados. Aguardando...');
            // Aguardar o evento de produtos carregados
            const handleProdutosCarregados = () => {
                console.log('✅ Produtos carregados, executando filtro...');
                window.removeEventListener('produtosCarregados', handleProdutosCarregados);
                filterProducts(category);
            };
            window.addEventListener('produtosCarregados', handleProdutosCarregados);
            return;
        }
        
        // Usar produtos global ou window.produtos como fallback
        const currentProducts = produtos || window.produtos || [];
        
        console.log('📦 Produtos disponíveis:', currentProducts.length);
        console.log('📊 Primeiro produto:', currentProducts[0]);
        
        const productGrid = document.getElementById('product-grid');
        const filterText = document.getElementById('filter-text');
        let filtered;
        let filterLabel;
        
        // Verificar se produtos está carregado
        if (!currentProducts || currentProducts.length === 0) {
            console.warn('⚠️ Produtos não carregados ainda. Tentando recarregar...');
            setTimeout(() => filterProducts(category), 500);
            return;
        }
        
        // Atualizar botões ativos
        updateActiveNavButton(category);
        
        if (category === 'all') {
            filtered = currentProducts;
            filterLabel = 'Todos os Produtos';
        } else if (category === 'granja') {
            filtered = currentProducts.filter(p => 
                p.category === 'fertilizantes' || 
                p.category === 'aves' || 
                p.category === 'ovos'
            );
            filterLabel = 'Produtos da Granja';
        } else if (category === 'parceiros') {
            filtered = currentProducts.filter(p => p.category === 'parceiros');
            filterLabel = 'Parceiros';
        } else if (category === 'fertilizantes') {
            filtered = currentProducts.filter(p => p.category === 'fertilizantes');
            filterLabel = 'Fertilizantes';
        } else if (category === 'aves') {
            filtered = currentProducts.filter(p => p.category === 'aves');
            filterLabel = 'Aves';
        } else if (category === 'ovos') {
            filtered = currentProducts.filter(p => p.category === 'ovos');
            filterLabel = 'Ovos';
        } else {
            filtered = currentProducts.filter(p => p.category === category);
            filterLabel = category.charAt(0).toUpperCase() + category.slice(1);
        }
        
        console.log('✅ Produtos filtrados:', filtered.length);
        console.log('🏷️ Filtro aplicado:', filterLabel);
        console.log('📋 Lista filtrada:', filtered.map(p => `${p.name} (${p.category})`));
        
        // Atualizar indicador de filtro
        if (filterText) {
            filterText.textContent = filterLabel;
        }
        
        // Renderizar produtos
        productGrid.innerHTML = filtered.map(p => `
            <div class="product-card bg-white rounded-lg shadow-lg p-6 flex flex-col items-center text-center transition-all duration-300 hover:shadow-xl">
                <img src="${p.image}" alt="${p.name}" class="w-40 h-40 object-cover rounded-lg mb-4">
                <h3 class="text-xl font-bold mb-2 font-lora">${p.name}</h3>
                <p class="text-gray-600 mb-4 flex-grow">${p.slogan}</p>
                <span class="text-xl font-bold text-[#5D4037] mb-4">R$ ${p.price.toFixed(2)}</span>
                <button class="detail-btn bg-[#8B4513] hover:bg-[#5D4037] text-white font-bold py-2 px-4 rounded-lg transition w-full" data-id="${p.id}">Ver Detalhes</button>
            </div>
        `).join('');
        
        // Scroll suave para a seção de produtos
        document.getElementById('produtos').scrollIntoView({ behavior: 'smooth' });
    }

    // Tornar funções globais
    window.filterProducts = filterProducts;
    window.updateActiveNavButton = updateActiveNavButton;
    
    // Inicialização - definir filtro padrão e sistema moderno
    document.addEventListener('DOMContentLoaded', function() {
        // Inicializar sistema de dropdown moderno
        setTimeout(() => {
            initModernDropdowns();
            updateActiveCategory('all');
        }, 100);
        
        // Aguardar produtos serem carregados
        window.addEventListener('produtosCarregados', function(event) {
            console.log('✅ Produtos carregados no index.html:', event.detail.count);
            console.log('📦 Produtos recebidos:', event.detail.produtos.slice(0, 2));
            
            // Agora que os produtos estão carregados, pode filtrar com segurança
            window.produtosCarregados = true;
            
            // Renderizar todos os produtos imediatamente com sistema moderno
            console.log('🔄 Renderizando todos os produtos com sistema moderno...');
            setTimeout(() => {
                applyFilterModern('all');
            }, 200);
        });
        
        // Teste de debug para verificar se os produtos estão carregados
        setTimeout(() => {
            console.log('🧪 TESTE: Verificando produtos após 2s...');
            console.log('produtos variable:', typeof produtos, produtos?.length);
            console.log('window.produtos:', typeof window.produtos, window.produtos?.length);
            console.log('dataManager:', typeof window.dataManager);
            
            if (window.dataManager) {
                window.dataManager.getActiveProducts().then(products => {
                    console.log('🧪 TESTE: Produtos do DataManager:', products.length);
                    if (products.length > 0) {
                        console.log('🧪 TESTE: Primeiro produto:', products[0]);
                        console.log('🧪 TESTE: Categorias disponíveis:', [...new Set(products.map(p => p.category))]);
                        
                        // Testar filtro de fertilizantes
                        const fertilizantes = products.filter(p => p.category === 'fertilizantes');
                        console.log('🧪 TESTE: Fertilizantes encontrados:', fertilizantes.length, fertilizantes.map(p => p.name));
                    }
                });
            }
        }, 2000);
    });
    
    // Função para atualizar botão ativo na navegação (definida abaixo)
    
    // Função para atualizar botão ativo na navegação
    function updateActiveNavButton(category) {
        // Remover classe active de todos os botões
        document.querySelectorAll('.nav-button').forEach(btn => {
            btn.classList.remove('active');
        });
        
        // Adicionar classe active ao botão correspondente
        if (category === 'all') {
            document.getElementById('nav-all').classList.add('active');
        } else if (category === 'granja' || category === 'fertilizantes' || category === 'aves' || category === 'ovos') {
            document.getElementById('nav-granja').classList.add('active');
        } else if (category === 'parceiros') {
            document.getElementById('nav-parceiros').classList.add('active');
        }
    }
    
    // Sistema de Dropdown Moderno - Padrão de Grandes Sites
    let activeDropdown = null;
    let hoverTimeout = null;
    
    function initModernDropdowns() {
        const dropdowns = document.querySelectorAll('.dropdown');
        
        dropdowns.forEach(dropdown => {
            const button = dropdown.querySelector('.dropdown-toggle');
            const content = dropdown.querySelector('.dropdown-content');
            
            // Eventos de mouse para hover suave
            dropdown.addEventListener('mouseenter', () => {
                clearTimeout(hoverTimeout);
                openDropdown(dropdown);
            });
            
            dropdown.addEventListener('mouseleave', () => {
                hoverTimeout = setTimeout(() => {
                    closeDropdown(dropdown);
                }, 150); // Delay pequeno para navegação suave
            });
            
            // Evento de clique no botão
            button.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleDropdown(dropdown);
            });
            
            // Eventos nos links das subcategorias
            const links = content.querySelectorAll('a');
            links.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Extrair categoria do onclick
                    const onclickAttr = link.getAttribute('onclick');
                    const match = onclickAttr.match(/selectCategory\('([^']+)'/);
                    if (match) {
                        const category = match[1];
                        console.log('🎯 Categoria clicada:', category);
                        
                        // Feedback visual imediato
                        link.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            link.style.transform = '';
                        }, 150);
                        
                        // Fechar dropdown e filtrar
                        closeAllDropdowns();
                        selectCategoryModern(category);
                    }
                });
            });
        });
        
        // Fechar dropdowns ao clicar fora
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.dropdown')) {
                closeAllDropdowns();
            }
        });
        
        console.log('✅ Sistema de dropdown moderno inicializado');
    }
    
    function openDropdown(dropdown) {
        closeAllDropdowns();
        dropdown.classList.add('open');
        const content = dropdown.querySelector('.dropdown-content');
        content.classList.add('show');
        activeDropdown = dropdown;
    }
    
    function closeDropdown(dropdown) {
        dropdown.classList.remove('open');
        const content = dropdown.querySelector('.dropdown-content');
        content.classList.remove('show');
        if (activeDropdown === dropdown) {
            activeDropdown = null;
        }
    }
    
    function closeAllDropdowns() {
        document.querySelectorAll('.dropdown').forEach(dropdown => {
            closeDropdown(dropdown);
        });
    }
    
    function toggleDropdown(dropdown) {
        if (dropdown.classList.contains('open')) {
            closeDropdown(dropdown);
        } else {
            openDropdown(dropdown);
        }
    }
    
    function selectCategoryModern(category) {
        console.log('🔥 FILTRO MODERNO - Categoria:', category);
        
        // Mostrar loading visual
        const productGrid = document.getElementById('product-grid');
        if (productGrid) {
            productGrid.innerHTML = `
                <div class="col-span-full flex justify-center items-center py-20">
                    <div class="text-center">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-[#5D4037] mx-auto mb-4"></div>
                        <p class="text-gray-600">Carregando produtos...</p>
                    </div>
                </div>
            `;
        }
        
        // Usar timeout para simular loading (UX melhor)
        setTimeout(() => {
            applyFilterModern(category);
        }, 300);
    }
    
    function applyFilterModern(category) {
        const produtos = window.produtos || [];
        console.log('📦 Produtos disponíveis para filtro:', produtos.length);
        
        if (produtos.length === 0) {
            console.warn('⚠️ Nenhum produto disponível');
            showErrorMessage('Produtos não carregados. Tente novamente.');
            return;
        }
        
        let filtered = [];
        let categoryLabel = '';
        
        switch(category) {
            case 'all':
                filtered = produtos;
                categoryLabel = 'Todos os Produtos';
                break;
            case 'fertilizantes':
                filtered = produtos.filter(p => p.category === 'fertilizantes');
                categoryLabel = 'Fertilizantes';
                break;
            case 'aves':
                filtered = produtos.filter(p => p.category === 'aves');
                categoryLabel = 'Aves';
                break;
            case 'ovos':
                filtered = produtos.filter(p => p.category === 'ovos');
                categoryLabel = 'Ovos';
                break;
            case 'granja':
                filtered = produtos.filter(p => ['fertilizantes', 'aves', 'ovos'].includes(p.category));
                categoryLabel = 'Produtos da Granja';
                break;
            case 'parceiros':
                filtered = produtos.filter(p => p.category === 'parceiros');
                categoryLabel = 'Parceiros';
                break;
            default:
                filtered = produtos.filter(p => p.category === category);
                categoryLabel = category.charAt(0).toUpperCase() + category.slice(1);
        }
        
        console.log(`✅ Filtro aplicado: ${categoryLabel} (${filtered.length} produtos)`);
        
        // Renderizar produtos com animação
        renderProductsModern(filtered, categoryLabel);
        
        // Atualizar indicador de categoria ativa
        updateActiveCategory(category);
        
        // Scroll suave para produtos
        document.getElementById('produtos')?.scrollIntoView({ 
            behavior: 'smooth',
            block: 'start'
        });
    }
    
    function renderProductsModern(products, categoryLabel) {
        const productGrid = document.getElementById('product-grid');
        const filterText = document.getElementById('filter-text');
        
        if (!productGrid) return;
        
        // Atualizar indicador de filtro
        if (filterText) {
            filterText.textContent = categoryLabel;
        }
        
        if (products.length === 0) {
            productGrid.innerHTML = `
                <div class="col-span-full text-center py-20">
                    <div class="text-6xl text-gray-300 mb-4">🔍</div>
                    <h3 class="text-xl font-bold text-gray-600 mb-2">Nenhum produto encontrado</h3>
                    <p class="text-gray-500">Tente uma categoria diferente</p>
                </div>
            `;
            return;
        }
        
        // Renderizar produtos com fade-in
        productGrid.innerHTML = products.map((product, index) => `
            <div class="product-card bg-white rounded-lg shadow-lg p-6 flex flex-col items-center text-center transition-all duration-300 hover:shadow-xl opacity-0 animate-fade-in" style="animation-delay: ${index * 100}ms">
                <img src="${product.image}" alt="${product.name}" class="w-40 h-40 object-cover rounded-lg mb-4" onerror="this.src='imagens/produtos/default/placeholder.png'">
                <h3 class="text-xl font-bold mb-2 font-lora text-[#5D4037]">${product.name}</h3>
                <p class="text-gray-600 mb-4 flex-grow text-sm">${product.slogan}</p>
                <span class="text-2xl font-bold text-[#5D4037] mb-4">R$ ${product.price.toFixed(2)}</span>
                <button class="detail-btn bg-[#8B4513] hover:bg-[#5D4037] text-white font-bold py-3 px-6 rounded-lg transition w-full transform hover:scale-105" data-id="${product.id}">
                    <i class="fas fa-eye mr-2"></i>Ver Detalhes
                </button>
            </div>
        `).join('');
        
        // Triggerar animações
        setTimeout(() => {
            productGrid.querySelectorAll('.product-card').forEach(card => {
                card.classList.remove('opacity-0');
                card.classList.add('opacity-100');
            });
        }, 50);
    }
    
    function showErrorMessage(message) {
        const productGrid = document.getElementById('product-grid');
        if (productGrid) {
            productGrid.innerHTML = `
                <div class="col-span-full text-center py-20">
                    <div class="text-6xl text-red-300 mb-4">⚠️</div>
                    <h3 class="text-xl font-bold text-red-600 mb-2">Erro</h3>
                    <p class="text-red-500">${message}</p>
                </div>
            `;
        }
    }
    
    function updateActiveCategory(category) {
        // Remover classe active de todos os botões
        document.querySelectorAll('.nav-button').forEach(btn => {
            btn.classList.remove('active');
        });
        
        // Adicionar classe active ao botão correspondente
        if (category === 'all') {
            document.getElementById('nav-all')?.classList.add('active');
        } else if (['granja', 'fertilizantes', 'aves', 'ovos'].includes(category)) {
            document.getElementById('nav-granja')?.classList.add('active');
        } else if (category === 'parceiros') {
            document.getElementById('nav-parceiros')?.classList.add('active');
        }
    }
    
    function selectCategory(category, label) {
        console.log('📂 Categoria selecionada:', category, label);
        
        // Fechar todos os dropdowns
        document.querySelectorAll('.dropdown').forEach(d => {
            d.classList.remove('open');
        });
        
        // Filtrar produtos - usar window.filterProducts para garantir
        console.log('🔍 Chamando filtro para categoria:', category);
        if (window.filterProducts && typeof window.filterProducts === 'function') {
            console.log('✅ Função filterProducts encontrada');
            window.filterProducts(category);
        } else {
            console.error('❌ Função filterProducts não encontrada ou não é função');
            console.log('🔍 window.filterProducts:', typeof window.filterProducts);
            
            // Fallback: filtro manual
            const produtos = window.produtos || [];
            console.log('🔄 Fallback: produtos disponíveis:', produtos.length);
            
            if (produtos.length > 0) {
                let filtered = produtos;
                if (category === 'fertilizantes') {
                    filtered = produtos.filter(p => p.category === 'fertilizantes');
                } else if (category === 'aves') {
                    filtered = produtos.filter(p => p.category === 'aves');
                } else if (category === 'ovos') {
                    filtered = produtos.filter(p => p.category === 'ovos');
                } else if (category === 'granja') {
                    filtered = produtos.filter(p => p.category !== 'parceiros');
                }
                
                const productGrid = document.getElementById('product-grid');
                if (productGrid) {
                    productGrid.innerHTML = filtered.map(p => `
                        <div class="product-card bg-white rounded-lg shadow-lg p-6 flex flex-col items-center text-center transition-all duration-300 hover:shadow-xl">
                            <img src="${p.image}" alt="${p.name}" class="w-40 h-40 object-cover rounded-lg mb-4">
                            <h3 class="text-xl font-bold mb-2 font-lora">${p.name}</h3>
                            <p class="text-gray-600 mb-4 flex-grow">${p.slogan}</p>
                            <span class="text-xl font-bold text-[#5D4037] mb-4">R$ ${p.price.toFixed(2)}</span>
                            <button class="detail-btn bg-[#8B4513] hover:bg-[#5D4037] text-white font-bold py-2 px-4 rounded-lg transition w-full" data-id="${p.id}">Ver Detalhes</button>
                        </div>
                    `).join('');
                    
                    console.log('✅ Produtos filtrados (fallback):', filtered.length);
                }
            }
        }
        
        // Scroll para produtos
        document.getElementById('produtos').scrollIntoView({ behavior: 'smooth' });
    }
    
    // Fechar dropdowns ao clicar fora
    document.addEventListener('click', function(event) {
        if (!event.target.closest('.dropdown')) {
            document.querySelectorAll('.dropdown').forEach(d => {
                d.classList.remove('open');
            });
        }
    });

    
    // Função de debug para forçar reaplicação do layout
    function debugLayoutReload() {
        console.log('🔧 DEBUG: Forçando reaplicação do layout...');
        
        if (window.dataManager) {
            // Mostrar informações do layout atual
            const currentLayout = window.dataManager.getCurrentLayout();
            console.log('Layout atual:', currentLayout);
            
            // Recriar dataManager
            window.dataManager = new DataManager();
            
            // Reaplicar layout
            const newLayout = window.dataManager.applyCurrentLayout();
            console.log('Layout reaplicado:', newLayout);
            
            // Mostrar notificação visual
            showNotification(`Layout debug: ${newLayout.name} aplicado!`, 'success');
            
            // Forçar atualização visual
            setTimeout(() => {
                document.body.style.transition = 'all 0.5s ease';
                document.body.style.transform = 'scale(0.98)';
                setTimeout(() => {
                    document.body.style.transform = 'scale(1)';
                }, 100);
            }, 100);
        } else {
            console.error('❌ DataManager não encontrado');
            showNotification('Erro: DataManager não carregado', 'error');
        }
    }
    </script>
</body>
</html>