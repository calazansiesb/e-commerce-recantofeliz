<!DOCTYPE html>
<html>
<head>
    <title>Verificar Layout Ativo</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .layout-info { 
            background: #f0f0f0; 
            padding: 20px; 
            border-radius: 8px; 
            margin: 10px 0;
        }
        .active { background: #d4edda; border: 2px solid #28a745; }
        .theme-preview { 
            width: 30px; 
            height: 30px; 
            display: inline-block; 
            margin-right: 10px; 
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>üé® Status dos Layouts - Granja Recanto Feliz</h1>
    
    <div id="current-layout" class="layout-info">
        <h2>üìç Layout Atual</h2>
        <p id="current-info">Carregando...</p>
    </div>
    
    <div id="all-layouts" class="layout-info">
        <h2>üìã Todos os Layouts</h2>
        <div id="layouts-list">Carregando...</div>
    </div>
    
    <div class="layout-info">
        <h2>üîß A√ß√µes</h2>
        <button onclick="ativarDefault()" style="padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Ativar Layout Padr√£o
        </button>
        <button onclick="ativarDiadasMaes()" style="padding: 10px 20px; margin: 5px; background: #e91e63; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Ativar Dia das M√£es
        </button>
        <button onclick="ativarNatal()" style="padding: 10px 20px; margin: 5px; background: #dc2626; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Ativar Natal
        </button>
        <button onclick="ativarPascoa()" style="padding: 10px 20px; margin: 5px; background: #7c3aed; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Ativar P√°scoa
        </button>
    </div>
    
    <script src="js/data-manager.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        verificarLayoutAtivo();
        
        // Atualizar a cada 2 segundos
        setInterval(verificarLayoutAtivo, 2000);
    });
    
    function verificarLayoutAtivo() {
        try {
            if (!window.dataManager) {
                document.getElementById('current-info').innerHTML = '‚ùå DataManager n√£o carregado';
                return;
            }
            
            const currentLayout = window.dataManager.getCurrentLayout();
            const allLayouts = window.dataManager.getLayouts();
            
            // Mostrar layout atual
            document.getElementById('current-info').innerHTML = `
                <div style="display: flex; align-items: center;">
                    <div class="theme-preview" style="background: ${currentLayout.colors.primary}"></div>
                    <div>
                        <strong>üéØ ${currentLayout.name}</strong><br>
                        <small>Tema: ${currentLayout.theme}</small><br>
                        <small>Cores: Prim√°ria ${currentLayout.colors.primary}, Secund√°ria ${currentLayout.colors.secondary}</small>
                    </div>
                </div>
                ${currentLayout.hero ? `
                    <div style="margin-top: 10px; padding: 10px; background: rgba(0,0,0,0.1); border-radius: 4px;">
                        <strong>Hero:</strong> ${currentLayout.hero.title}<br>
                        <small>${currentLayout.hero.subtitle}</small>
                    </div>
                ` : ''}
            `;
            
            // Mostrar todos os layouts
            let layoutsHtml = '';
            Object.entries(allLayouts).forEach(([key, layout]) => {
                const isActive = currentLayout.theme === layout.theme;
                layoutsHtml += `
                    <div class="layout-info ${isActive ? 'active' : ''}" style="margin: 5px 0; padding: 10px;">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div style="display: flex; align-items: center;">
                                <div class="theme-preview" style="background: ${layout.colors.primary}"></div>
                                <div>
                                    <strong>${layout.name}</strong> ${isActive ? '‚úÖ' : ''}<br>
                                    <small>Tema: ${layout.theme}</small>
                                    ${layout.dateStart ? `<br><small>üìÖ ${layout.dateStart} at√© ${layout.dateEnd}</small>` : ''}
                                </div>
                            </div>
                            <button onclick="ativarLayout('${key}')" 
                                    style="padding: 5px 10px; background: ${isActive ? '#6c757d' : '#28a745'}; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                ${isActive ? 'Ativo' : 'Ativar'}
                            </button>
                        </div>
                    </div>
                `;
            });
            document.getElementById('layouts-list').innerHTML = layoutsHtml;
            
        } catch (e) {
            document.getElementById('current-info').innerHTML = '‚ùå Erro: ' + e.message;
            console.error('Erro ao verificar layout:', e);
        }
    }
    
    function ativarLayout(layoutKey) {
        try {
            const success = window.dataManager.activateLayout(layoutKey);
            if (success) {
                alert(`‚úÖ Layout "${layoutKey}" ativado com sucesso!`);
                verificarLayoutAtivo();
            } else {
                alert('‚ùå Erro ao ativar layout');
            }
        } catch (e) {
            alert('‚ùå Erro: ' + e.message);
        }
    }
    
    function ativarDefault() { ativarLayout('default'); }
    function ativarDiadasMaes() { ativarLayout('diadasMaes'); }
    function ativarNatal() { ativarLayout('natal'); }
    function ativarPascoa() { ativarLayout('pascoa'); }
    </script>
</body>
</html>
