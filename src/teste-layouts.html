<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Layouts - Granja Recanto Feliz</title>
    <script src="js/data-manager.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .layout-card { 
            border: 1px solid #ccc; 
            margin: 10px; 
            padding: 15px; 
            border-radius: 8px;
            background: #f9f9f9;
        }
        .colors { display: flex; gap: 5px; margin: 10px 0; }
        .color-box { width: 30px; height: 30px; border-radius: 4px; border: 1px solid #000; }
        button { 
            background: #007bff; 
            color: white; 
            border: none; 
            padding: 8px 16px; 
            border-radius: 4px; 
            cursor: pointer; 
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        .active { background-color: #28a745 !important; }
    </style>
</head>
<body>
    <h1>üé® Teste de Layouts - Granja Recanto Feliz</h1>
    
    <div>
        <button onclick="loadLayouts()">üîÑ Recarregar Layouts</button>
        <button onclick="resetData()">üóëÔ∏è Resetar Dados</button>
        <button onclick="checkCurrentLayout()">üëÅÔ∏è Layout Atual</button>
    </div>
    
    <div id="current-layout" style="background: #e8f4fd; padding: 15px; margin: 20px 0; border-radius: 8px;">
        <h3>Layout Atual:</h3>
        <div id="current-info">Carregando...</div>
    </div>
    
    <div id="layouts-container">
        <h3>Layouts Dispon√≠veis:</h3>
        <div id="layouts-list">Carregando layouts...</div>
    </div>

    <script>
        // Aguardar o DataManager carregar
        window.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                loadLayouts();
                checkCurrentLayout();
            }, 500);
        });

        function loadLayouts() {
            const layouts = window.dataManager.getLayouts();
            const container = document.getElementById('layouts-list');
            
            container.innerHTML = '';
            
            Object.entries(layouts).forEach(([key, layout]) => {
                const card = document.createElement('div');
                card.className = 'layout-card';
                
                card.innerHTML = `
                    <h4>${layout.name} (${key})</h4>
                    <p><strong>Tema:</strong> ${layout.theme}</p>
                    ${layout.description ? `<p><strong>Descri√ß√£o:</strong> ${layout.description}</p>` : ''}
                    ${layout.dateStart ? `<p><strong>Per√≠odo:</strong> ${layout.dateStart} at√© ${layout.dateEnd}</p>` : ''}
                    <p><strong>Ativo:</strong> ${layout.active ? 'Sim' : 'N√£o'}</p>
                    
                    <div class="colors">
                        <div class="color-box" style="background-color: ${layout.colors.primary}" title="Primary"></div>
                        <div class="color-box" style="background-color: ${layout.colors.secondary}" title="Secondary"></div>
                        <div class="color-box" style="background-color: ${layout.colors.accent}" title="Accent"></div>
                        <div class="color-box" style="background-color: ${layout.colors.background}" title="Background"></div>
                    </div>
                    
                    <p><strong>Banner:</strong> "${layout.bannerText}"</p>
                    
                    ${layout.features ? `
                        <p><strong>Caracter√≠sticas:</strong></p>
                        <ul>
                            ${layout.features.rusticCards ? '<li>ü™µ Cards R√∫sticos</li>' : ''}
                            ${layout.features.woodTexture ? '<li>üå≤ Textura de Madeira</li>' : ''}
                            ${layout.features.animalIcons ? '<li>üêì √çcones de Animais</li>' : ''}
                            ${layout.features.handDrawnElements ? '<li>‚úèÔ∏è Elementos Artesanais</li>' : ''}
                        </ul>
                    ` : ''}
                    
                    ${layout.typography ? `
                        <p><strong>Tipografia:</strong></p>
                        <ul>
                            <li>T√≠tulos: ${layout.typography.headings}</li>
                            <li>Corpo: ${layout.typography.body}</li>
                        </ul>
                    ` : ''}
                    
                    <button onclick="activateLayout('${key}')" ${key === 'default' ? 'class="active"' : ''}>
                        ‚ú® Ativar Layout
                    </button>
                `;
                
                container.appendChild(card);
            });
            
            console.log('Layouts carregados:', layouts);
        }

        function checkCurrentLayout() {
            const current = window.dataManager.getCurrentLayout();
            const info = document.getElementById('current-info');
            
            info.innerHTML = `
                <strong>Nome:</strong> ${current.name}<br>
                <strong>Tema:</strong> ${current.theme}<br>
                <strong>Cores:</strong> 
                <div class="colors">
                    <div class="color-box" style="background-color: ${current.colors.primary}"></div>
                    <div class="color-box" style="background-color: ${current.colors.secondary}"></div>
                    <div class="color-box" style="background-color: ${current.colors.accent}"></div>
                    <div class="color-box" style="background-color: ${current.colors.background}"></div>
                </div>
            `;
            
            console.log('Layout atual:', current);
        }

        function activateLayout(key) {
            if (window.dataManager.activateLayout(key)) {
                alert(`Layout "${key}" ativado com sucesso!`);
                checkCurrentLayout();
                
                // Atualizar bot√µes
                document.querySelectorAll('button').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
            } else {
                alert('Erro ao ativar layout!');
            }
        }

        function resetData() {
            if (confirm('Isso ir√° resetar todos os dados. Confirma?')) {
                localStorage.removeItem('granjaRecantoFelizData');
                window.location.reload();
            }
        }
    </script>
</body>
</html>
